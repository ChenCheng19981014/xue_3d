# three.js代码(地球等):



### 点击获取对象信息：

```javascript
	// 测试点击物体 检查对象
    // var intersectscc = raycaster.intersectObjects(scene.children, true);
    // if (intersectscc.length > 0) {
    //   console.log(intersectscc);
    //   console.log(intersectscc[0].object, "intersects[0].object");
    // }
```

### 页面加载进度条

```javascript
//todo 进度条专用
     var a = (xhr.loaded/xhr.total*100).toString().substring(0,4) -0 
	 console.log( xhr.loaded/xhr.total*100,"xhr.loaded/xhr.total*100" );
	 console.log( (xhr.loaded/xhr.total*100).toString().substring(0,3),"(xhr.loaded/xhr.total*100).toString().sub" );
	 console.log( a,"a" );
	if(a.toString().length<4 && a>10){
		    a = a+''+'.0'
		console.log( a,"aaaaaa" );
	}
		divSon.style.width = a+'%'
		span.innerHTML = a+'%'

		a - 0 >= 100? div.remove():''
```



### 模型旋转等

```javascript
// 获取将对象获取存入数组当中  
this.initFan = () => {
    scene.traverse((i, index) => {
      if (i.name == "asd2") {
        fan.push(i);
      } else if (i.name == "asd3") {
        fan.push(i);
      }
    });
    //设置定时器并使模型绕着z轴旋转
    var time = setInterval(() => {
      fan[0].rotation.z++;
      fan[1].rotation.z++;
    }, 5);
  };
```

### 模型循环缩放

```javascript
// todo 设置一个变量频率
   let factor = 0;
// todo定时器 ++
   var time = setInterval(() => {
     factor += 0.01;
     factor = factor % Math.PI; // 取余
     let result = Math.sin(factor) * 5 + 5 + 8;
     sprite.scale.set(result, result, 100);
});

//-----------------------------------------------------

 // todo 设置一个变量频率
    let factor = 0;
 // todo定时器 ++
    var time = setInterval(() => {
    factor += 0.01;
    factor = factor % Math.PI; // 取余
    let result = Math.sin(factor) * 1;
    console.log(result.toFixed(4));
    clearInterval(time);
  //  sprite.scale.set(result, result, 100);
   }, 200);


```

### 克隆的原理

```javascript

克隆的原理:
this.clone = data => {
    // var newObj =  //保持继承链
    let newObj = { ...data }
    newObj.__proto__ = new data.constructor()
    return newObj
}

//输入文字的颜色选项接口
this.txtColor = '#0000FF'
this.player.eventBus.$emit('changeTxt', this.txt, this.txtColor)

```



### 弹出注意框{msg}：

```javascript
//   定义一个函数
let num = 0;
let height = 0;
let style =
  "position: fixed;display: inline-block;height: 25px;line-height: 25px;background-color: #fff;border-radius: 8px;color: #000;font-size: 16px;padding: 10px 26px;z-index:10000;box-shadow:0px 4px 12px rgba(0,0,0,0.15)";
function message(val) {
  num++;
  const msg = document.createElement("div");
  msg.innerText = val;
  msg.className = "message";
  document.body.appendChild(msg);
  if (num == 1) {
    msg.style =
      "left: 50%;top: 100px ; transform: translate(-50% , -50% );" + style;
  } else {
    height = 100 + (num - 1) * 60 + "px";
    msg.style =
      "left: 50% ; top: " +
      height +
      " ; transform: translate(-50% , -50%); " +
      style;
  }
  setTimeout(() => {
    num--;
    console.log(num);
    msg.remove();
  }, 2500);
}
// 暴露这个函数
export { message };


if (selectedObj) {
         chuimoIndex = selectedObj.name.replace(/[^0-9]/gi, "") - 0;
      } else {
         window.$msg("您尚未选中吹膜机");
         return;
      }

```

### 引入public.js

```javascript
import Public from "./Pubilc";
export class ChangeInterface extends Public {
  constructor(assets) {
    super(assets);
    this.fn = new ChangeFn(assets);
  }
    change(){};
    add(){};
}
var changeFn = function(assets){
     let { camera, controls, scene } = assets;
    let public = new Public(assets);
}
```

### 后处理解决方法

```javascript
//解决颜色过曝的问题
changeBloomComposer.readBuffer.texture.encoding = renderer.outputEncoding;
```

### 相机缓动

```javascript
// 使动画循环使用时阻尼或自转 意思是否有惯性
controls.enableDamping = true;
//动态阻尼系数 就是鼠标拖拽旋转灵敏度
controls.dampingFactor = 0.25;
//是否可以缩放
controls.enableZoom = true;
//是否自动旋转
controls.autoRotate = true;
//旋转的速度
controls.autoRotateSpeed = 10.0
//设置相机距离原点的最小最远距离
controls.minDistance  = 200;
controls.maxDistance  = 600;
//是否开启右键拖拽
controls.enablePan = true;
```

### 从当前位置进行聚焦

```javascript
// pb封装的函数--->this.getCameraAnimaBaseData
let end = this.getCameraAnimaBaseData(false, -122.70944858, 79.541053, 2.983396323, 0, 0, 0)
this.startCloseMap.foucsXieDai = this.cameraAnima(true, end, 1)
```

### 修改颜色

```javascript
//修改一些颜色 需要进行new一下
模型对象.material.color = new THREE.Color('rgba(56,75,131,0.5)')
```

### 加载器

```javascript
//文本加载器---加载图片、Josn等等
let textureLoader = new THREE.TextureLoader()
//canvas加载器
模型对象.material.map = new THREE.CanvasTexture(canvas)
//创建一个canvas的操作步骤
let canvas = document.createElement('canvas')
// 设置它的宽高
canvas.width = width
canvas.height = height
// 声明它可以进行绘图
let ctx = canvas.getContext('2d')
// 底色
ctx.fillStyle = 'rgb(213,193,149)'
// 绘制"已填充"的矩形
ctx.fillRect(0, 0, width, height)
// 字体
ctx.font = 260 + 'px " bold'
// 使居中
ctx.textAlign = 'center'
```



### 摄像机位置

```javascript
    console.log(
      Math.round(camera.position.x) +
        "," +
        Math.round(camera.position.y) +
        "," +
        Math.round(camera.position.z)
    );
    console.log(
      Math.round(controls.target.x) +
        "," +
        Math.round(controls.target.y) +
        "," +
        Math.round(controls.target.z)
    );
```



# Vue的学习（含css）：

## 1.安装vue步骤安装配置：

```javascript
拿到项目需要 //初始化项目
1.npm i
2.npm run serve
```



```
  "lint:nofix": "vue-cli-service lint --no-fix",
淘宝镜像：npm install -g cnpm --registry=https://registry.npm.taobao.org
注意可通过vue ui 进入可视化窗口进行创建项目;
1.npm install -g vue-cli  可升级脚手架：npm install -g @vue/cli
2.npm install -g webpack
3：选定路径，新建vue项目，这里我是新建到桌面上
>cd desktop
4：在上一步得目录下新建项目，指令vue init  webpack +项目名称
>Desktop>vue> init webpack firstvue   进入文件夹创建第一个vue项目
5.上一步之后就会开始新建项目，询问项目的相关配置。一路yes省事儿没啥问题
6.进入项目下面
    >cd firstvue
    1.vue create demo
    2.cd demo
    3.npm run serve
   注意：
    终端或者cmd目录结构导入：
                      命令行：npm i less less-loader
    <style lang="less" scoped>
    
 
 ---------------------------------------------------------------------------
 初始化vue项目的时候出现的问题:
 
 vue中报 chokidar@2: Error: Cannot find module 'watchpack-chokidar2'
 终端执行:
 npm i chokidar@2
    
```



![image-20210128173637007](C:\Users\user\AppData\Roaming\Typora\typora-user-images\image-20210128173637007.png)

![image-20210223164231983](C:\Users\user\AppData\Roaming\Typora\typora-user-images\image-20210223164231983.png)

#### 1-1.（选项配置）：![image-20201228100431637](C:\Users\user\AppData\Roaming\Typora\typora-user-images\image-20201228100431637.png)



![image-20201228100216110](C:\Users\user\AppData\Roaming\Typora\typora-user-images\image-20201228100216110.png)

创建项目步骤：

#####                                         1.vue create demo

##### 							             2.cd demo

##### 										 3.npm run serve

#### 1-2.目录结构图：



![image-20201228100251396](C:\Users\user\AppData\Roaming\Typora\typora-user-images\image-20201228100251396.png)

## css3学习：

```javascript
块级元素:
div h1 h2 h3 span p table ul li


内敛元素:
a select input label


//todo 宽可以线性的变化
animation: width 0.3s linear;
//todo 具体的变化 宽从0%-100% 从现实到不显示 从坐标    (210px, 0)->translate(0, 0)
          @keyframes width {
            0% {
              display: none;
              transform: translate(210px, 0);
              width: 0;
            }
            100% {
              display: block;
              transform: translate(0, 0);	
              width: 195px;
            }
          }
  //todo 去除掉Input输入框的样式
  outline: none;


ul {
    height: 100%;
    width: 1200px;
    margin: 0 auto;
    // background-color: red;
    li {
      margin: 10px 30px 0 0;
      line-height: 30px;
      text-align: center;
      float: left;
      min-width: 70px;
      font-size: 15px;
      // font-weight:50px;
      font-weight: 500;
//所有的动画在0.5秒内执行
      transition: all 0.5s;
    }
    li:hover {
      font-weight: 800;
    }
    li:last-child:hover {
        color: brown;
 //旋转180度
        transform: rotate(180deg);
      }
    li:last-child{
        margin-left: -70px;
      }
    
  }


            markLine: {
              lineStyle: {
                type: "dashed",
              },
              data: [[{ type: "min" }, { type: "max" }]],
            },        
```



### 1、css页面无限轮播：

```javascript
    
kehuListScroll();
    function kehuListScroll() {
      //获取ul
      var kehuList = document.querySelector(".kehu_menu").childNodes[0];
      // 获取整个li的一个高度
      var height = kehuList.childNodes[0].childNodes[0].clientHeight;
      // 高为14
      var a = 5;
      var time = setInterval(() => {
        a += height + 10;
        //todo 动画执行transition:all .5s;
        kehuList.style =
          "transition:all .5s;transform:translateY(" + -a + "px)";
        if ( a >= (height + 10) * 10 ) {
          setTimeout(() => {
            kehuList.style = "transform:translateY(0px)";
            a = 5;
          }, 500);
        }
      }, 2000);
    }
```





### 2、DIV标签的第几个子类:

```javascript
div:nth-child(2) {
     color: rgb(27, 151, 189);
}
```

### 3、css盒子（flex）分割：

```javascript
// 可分割
display: flex;
// 分割可换行  
flex-wrap: wrap;

// 分割方向     
flex-direction: column;
// 可设置最小宽度设置一行几个
min-width: 49%;

// 横排
flex-direction: wrap;
// 竖排
flex-direction: column;
```

### 4、css文字的缩放:

```javascript
font-size: 10px;
transform: scale(0.9);
```



### 5、Echarts绘制图表:

```javascript
initEcharts() {
      var echarts = this.$echarts;
      // console.log(document.querySelector(".cylinder_charts"), "++++");
      //获取dom中图标加地方
      var myChart = echarts.init(
        document.querySelector(".statistical_comparison_charts")
      );
      var myChart1 = echarts.init(document.querySelector(".cylinder_charts"));
      this.customerEcharts = myChart;
      this.dingdanEcharts = myChart1;
      // 绘制图表
      this.option = {
        
      };
      this.option1 = {
      };
      myChart.setOption(this.option);
      myChart1.setOption(this.option1);
    }
```

![image-20210116105227366](C:\Users\user\AppData\Roaming\Typora\typora-user-images\image-20210116105227366.png)



### 6、Echarts的添加

```javascript
//main.js中添加：
var echarts = require("echarts");
Vue.prototype.$echarts = echarts;
data(){
	customerEcharts = "" //方便后期的特效
}
//声明全局echarts---使用的vue中使用
var echarts = this.$echarts;
//查找元素
var myChart = echarts.init(document.querySelector("xxx"));
this.customerEcharts = myCharts;
this.option = {
    //echarts图标信息
};
// 在dom上面set 进行渲染
myCharts.setOption(this.option);
```

### 7、 Echarts信息关掉..

```javascript
悬浮提示信息关闭
tooltip : {
      show: false
    },
悬浮样式关闭
内容写在series里
series: [{
    hoverAnimation: false,
}}
```

### 8、Echarts中间添加文字

```javascript
option = {
    tooltip: {
        trigger: 'item',
        formatter: '{a} <br/>{b}: {c} ({d}%)'
    },
    legend: {
        orient: 'vertical',
        left: 10,
        data: ['设备']
    },
    graphic: [{　　　　　　　　　　　　　　　　//环形图中间添加文字
                    type: 'text',　　　　　　　　　　　　//通过不同top值可以设置上下显示
                    left: 'center',　　　　　　　　　　
                    top: '30%',
                    style: {　　　　　　　　　　　　　　　　
                        text: "80%",
                        textAlign: 'center',
                        fill: '#000',　　　　　　　　//文字的颜色
                        width: 30,
                        fontSize: 18,
                        color: "#4d4f5c",
                        fontFamily: "Microsoft YaHei"
                    }
                },
                ],
    series: [
        {
            name: '访问来源',
            type: 'pie',
            radius: ['50%', '70%'],
            avoidLabelOverlap: false,
            label: {
                show: false,
                position: 'center'
            },
            emphasis: {
                label: {
                    show: true,
                    fontSize: '30',
                    fontWeight: 'bold'
                }
            },
            labelLine: {
                show: false
            },
            data: [
                {value: 90, name: '设备',
                itemStyle : {
                  shadowBlur: 10,
                shadowOffsetX: 0,
                shadowColor: "rgb(16,26,44)",
                color:"rgb(44,168,253)"
                }},
                {value: 5, name: '设备值',
                itemStyle : {
                  shadowBlur: 10,
                shadowOffsetX: 0,
                shadowColor: "rgb(16,26,44)",
                color:"rgb(14,48,74)"
                }},
            ],
           
            
        }
    ]
};

<div v-show="sheBeiDisplay" class="shebeiEcharts1"></div>
<div v-show="!sheBeiDisplay" class="shebeiEcharts2"></div>
```

### 9、Echarts图表样式

### E图表样式一

![image-20210129100726938](C:\Users\user\AppData\Roaming\Typora\typora-user-images\image-20210129100726938.png)

```javascript
option = {
    title: {
        text: 'Echarts图表'
    },
    tooltip: {
        trigger: 'axis',
        axisPointer: {
            type: 'cross',
            label: {
                backgroundColor: '#6a7985'
            }
        }
    },
    legend: {
        data: ['标题一', '标题二', '标题三', '标题四', '标题五']
    },
    //下载按钮显示与否
    toolbox: {
        feature: {
            saveAsImage: {}
        }
    },
    //左右宽窄
    grid: {
        left: '3%',
        right: '4%',
        bottom: '3%',
        containLabel: true
    },
    // X轴信息
    xAxis: [
        {
            type: 'category',
            boundaryGap: false,
            data: ['x1','x2','x3','x4','x5','x6','x7']
        }
    ],
    // y轴信息
    yAxis: [
        {
            type: 'value'
        }
    ],
    series: [
        {
            name: '标题一',
            type: 'line',
            stack: '总量',
            areaStyle: {},
            emphasis: {
                focus: 'series'
            },
            data: [120, 132, 101, 134, 90, 230, 210]
        },
        {
            name: '标题二',
            type: 'line',
            stack: '总量',
            areaStyle: {},
            emphasis: {
                focus: 'series'
            },
            data: [220, 182, 191, 234, 290, 330, 310]
        },
        {
            name: '标题三',
            type: 'line',
            stack: '总量',
            areaStyle: {},
            emphasis: {
                focus: 'series'
            },
            data: [150, 232, 201, 154, 190, 330, 410]
        },
        {
            name: '标题四',
            type: 'line',
            stack: '总量',
            areaStyle: {},
            emphasis: {
                focus: 'series'
            },
            data: [220, 332, 301, 334, 390, 380, 320]
        },
        {
            name: '标题五',
            type: 'line',
            stack: '总量',
            label: {
                show: true,
                position: 'top'
            },
            areaStyle: {},
            emphasis: {
                focus: 'series'
            },
            data: [220, 332, 401, 534, 690, 730, 820]
        }
    ]
};
```



### E图表样式二

![image-20210129100740796](C:\Users\user\AppData\Roaming\Typora\typora-user-images\image-20210129100740796.png)

```javascript
this.option = {
        legend: {},
        tooltip: {
          trigger: "axis",
          showContent: false,
        },
        dataset: {
          source: [
            [
              "product",
              "测试一",
              "测试二",
              "测试三",
              "测试四",
              "测试五",
              "测试六",
            ],
            ["c++试题测试", 56.5, 82.1, 88.7, 70.1, 53.4, 85.1],
            ["c++专题测试", 51.1, 51.4, 55.1, 53.3, 73.8, 68.7],
            ["c++例题测试", 40.1, 62.2, 69.5, 36.4, 45.2, 32.5],
            ["c++算法测试", 25.2, 37.1, 41.2, 18, 33.9, 49.1],
          ],
        },
        xAxis: { type: "category" },
        yAxis: { gridIndex: 0 },
        // 线性图的高度
        grid: { top: "55%", height: "35%" },
        series: [
          {
            type: "line",
            smooth: true,
            seriesLayoutBy: "row",
            emphasis: { focus: "series" },
          },
          {
            type: "line",
            smooth: true,
            seriesLayoutBy: "row",
            emphasis: { focus: "series" },
          },
          {
            type: "line",
            smooth: true,
            seriesLayoutBy: "row",
            emphasis: { focus: "series" },
          },
          {
            type: "line",
            smooth: true,
            seriesLayoutBy: "row",
            emphasis: { focus: "series" },
          },
          {
            type: "pie",
            id: "pie",
            radius: "30%",
            center: ["50%", "30%"],
            emphasis: { focus: "data" },
            label: {
              formatter: "{b}: {@测试二} ({d}%)",
            },
            encode: {
              itemName: "product",
              value: "测试一",
              tooltip: "测试二",
            },
          },
        ],
      };
```



### 7、css鼠标样式的改变

```javascript
cursor: pointer;//手
cursor: wait;//转圈
cursor: help;//问号
```

### 8、css中style的lang="less"

```javascript
终端或者cmd目录结构导入：
                      命令行：npm i less less-loader
代码结构中css的LESS的高速开发：
<script>
export default {};
</script>
//todo必须声明lang="less"
<style lang="less" scoped>
.about {
  width: 100vw;
  height: 100vh;
  background-color: wheat;
  ---------------------------------------  
  //上下分割
  flex-direction: column;
  ---------------------------------------       
  //设置可分割
  display: flex;
  .shang {
      //得一半
    flex: 1;
    background-color: cadetblue;
  }
  .xia {
      //得一半
    flex: 1;
    display: flex;
    ---------------------------------------  
      //左右分割
    flex-direction: row;
    ---------------------------------------  
    background-color: violet;
    .xiazuo {
        //得一半
      flex: 1;
      background-color: red;
    }
    .xiayou {
        //得一半
      flex: 1;
      background-color: blueviolet;
    }
  }
}
</style>

```

运行样式：

![image-20201228095725481](C:\Users\user\AppData\Roaming\Typora\typora-user-images\image-20201228095725481.png)



### 9、css阿里巴巴矢量图使用：

```javascript
iconfont
//todo 引入矢量图 图标          
<i class=" iconfont icon-ai-arrow-down "></i>

html页面的引入：
<link rel="stylesheet" href="//at.alicdn.com/t/font_2296560_ik19yc5tvha.css">

//todo iconfont
    
//拼接字符串 并存放矢量图
<i :class="'iconfont ' + i.iconfont"></i>

```

### 			10、css中Input框预留文字:

```javascript
<input
   placeholder="搜索C++课程资料"
    type="text"
                  name=""
                  id=""
                />
```

### 11、Css上加动画transform

```javascript
animation: rotate 0.5s linear;

 @keyframes rotate {
 0% {
     transform: rotate(0deg);
     }
 100% {
     transform: rotate(180deg);
     }     
     
  transition: all 0.5s; 
  transform: rotate(180deg);       
			
```

### 12、 Css 字体变粗

```javascript
font-weight: bold;
```

### 13、 Css背景颜色渐变

```javascript
background: linear-gradient(
    rgb(25, 30, 63),
    rgb(77, 81, 106),
    rgb(177, 179, 190)
  );
```



### 14、 Css修改元素的style

```javascript
xxx.style = "background-color:rgb(52, 60, 75)";
xxx.style = "transition:all 0.8s;transform: translateX(0%);";
xxx.style = "opacity:0;";

xxx.style =
"transform:translateY(" + -this.kehuScrollIndex + "px)";
xxx.style =
"transition:all .5s;transform:translateY(" + -a + "px)";
```



### 15、Css中select默认追

```javascript
 --------并且值不在下拉框中显示------
<select type="text" ID="txtSeq" name="txtSeq" style="width:100px">
      <option value="" disabled selected hidden>请选择</option> 
      <option>小学</option>
      <option>初中</option>
      <option>高中</option>
 </select>
```



### 16、Css文字样式family：

```javascript
---------------------------------------------------------
中文名	英文名	Unicode	Unicode 2
Mac OS
华文细黑	STHeiti Light [STXihei]	
华文黑体	STHeiti	
华文楷体	STKaiti	
华文宋体	STSong	
华文仿宋	STFangsong	
丽黑 Pro	LiHei Pro Medium	
丽宋 Pro	LiSong Pro Light	
标楷体	BiauKai	
苹果丽中黑	Apple LiGothic Medium	
苹果丽细宋	Apple LiSung Light	
Windows
新细明体	PMingLiU	
细明体	MingLiU	
标楷体	DFKai-SB	
黑体	SimHei	
宋体	SimSun	
新宋体	NSimSun	
仿宋	FangSong	
楷体	KaiTi
仿宋_GB2312	FangSong_GB2312	
楷体_GB2312	KaiTi_GB2312	
微软正黑体	Microsoft JhengHei	
微软雅黑	Microsoft YaHei	
Office
隶书	LiSu	
幼圆	YouYuan	\
华文细黑	STXihei	
华文楷体	STKaiti	
华文宋体	STSong	
华文中宋	STZhongsong	
华文仿宋	STFangsong	
方正舒体	FZShuTi	
方正姚体	FZYaoti	
华文彩云	STCaiyun	
华文琥珀	STHupo	
华文隶书	STLiti	
华文行楷	STXingkai	
华文新魏	STXinwei	
```



### 17、轮播点击后溢出的操作

```javascript
// 点击回去可以记住当前的位置 并赋值后重新恢复位置
------------------------------------------------------------------------------    
customerOrderInformation1(i) {
      this.isdingdanEcharts = !this.isdingdanEcharts;
      if (i) {
        this.selecedOrder = this.customerOrder[i];
      } else {
        // setTimeout(() => {
        var kehuList = document.querySelector(".kehu_menu_child");
        kehuList.style =
          "transform:translateY(" + -this.kehuScrollIndex + "px)";
        // }, 0);
      }
    },
        
   -------------------------------------------------------------------------------   
       kehuListScroll() {
      var kehuList = document.querySelector(".kehu_menu").childNodes[0];
      var height = kehuList.childNodes[0].childNodes[0].clientHeight;
      var a = 5;
      var time = setInterval(() => {
        if (!this.isdingdanEcharts) return;
        a += height + 10;
        this.kehuScrollIndex = a;
        kehuList.style =
          "transition:all .5s;transform:translateY(" + -a + "px)";
        if (a >= (height + 10) * 10) {
          setTimeout(() => {
            kehuList.style = "transform:translateY(0px)";
            a = 5;
          }, 500);
        }
        console.log(kehuList);
      }, 2000);
    }     
     ------------------------------------------------------------------------------ 
        
```



### 18、路由的配置（复杂一点）

#### 1、earth.vue

```javascript
<template>
  <div>
    <Header></Header><Map v-show="$route.name != 'productLine'"></Map>
    // 提升渲染的效果
    <keep-alive>
      <router-view v-if="$route.meta.keep"></router-view>
    </keep-alive>
    <router-view v-if="!$route.meta.keep"></router-view>
  </div>
</template>
```

#### 2、index.js

```javascript
const routes = [
  {
    path: "/",
    name: "/",
    redirect: "/earth/productBase"
  },
  {
    path: "/earth",
    name: "Earth",
    component: Earth,
    children: [
      {
        path: "productBase",
        name: "productBase",
        component: productBase
      },
      {
        path: "customerInfo",
        name: "customerInfo",
        component: customerInfo
      },
      {
        path: "productLine",
        name: "productLine",
        component: productLine,
        meta: { keep: true }
      }
    ]
  },
  {
    path: "/factory",
    name: "factory",
    component: Factory,
    children: [
      {
        path: "park",
        name: "park",
        component: Park
      },
      {
        path: "zhusu",
        name: "zhusu",
        component: Zhusu
      },
      {
        path: "geban",
        name: "geban",
        component: Geban
      }
    ]
  }
];
```



### 19、图片的3D旋转

```javascript
-------------开始的状态------------------
transform: rotateY(0turn);
-------------结束的状态------------------
transform: rotateY(3rad);


----------------------------------------
// 执行的时间
transition: all 0.5s;
// 旋转的角度
transform: rotate(0deg);
// 旋转的角度
transform: rotate(180deg);
```



### 20、图片居中

```javascript
margin-left: 50%;
transform: translate(-50%, 0);
```

### 21、CSS中的循环运动

```javascript
    animation: move 2s infinite ease-in-out;
    @keyframes move {
      0% {
        transform: translateX(-40%);
      }
      50% {
        transform: translateX(-50%);
      }
      100% {
        transform: translateX(-40%);
      }
    }
```

### 22、点击选中设置特殊的样式 、 图片 、样式

```javascript
针对点击获取对应的索引 就会有响应的样式
:class="rightShowIndex == index ? 'show' : ''"

<img class="img" :src=" rightShowIndex == index ? rightImage2[index].url : rightImage1[index].url " alt=""
          />
```

### 23、盒子垂直居中的方法

```javascript
/**index.wxss**/
.canvas-box{
  width: 100vw;
  border: 1px solid red;
  
  /* display: flex;
  align-items: center;
  justify-content: center; */
  
}
.canvas1 {
  width: 90vw;
  height: 50vh;
    
  /* margin:0 auto;
  box-sizing: border-box; */
    
    
  /* left: 50%;
  top: 50%;
  transform: translate(-50%,-50%); */
}
```



## vue学习

### 1、vue>ul>li的遍历

```javascript
------------------------存放数组遍历---------------------------
<li
 v-for="(i, index) in [
            { num: 1 },
            { num: 6 },
            { num: 3 },
            { num: 10 }
          ]"
          :key="index"
        >
          {{ i.num }}
        </li>
-----------------------直接分几等分-----------------------------
      <ul>
        <li v-for="i in 4" :key="i"></li>
      </ul>


```

### 2、vue索引使用图片

```javascript
<div class="showBgc">
    // 点击哪一个  显示哪一个图片
      <img :src="imgList[imgIndex]" alt="" />
      <div @click="back" class="back">返回上级</div>
    </div>

mounted() {
    // 六张图片全部Push到一个数组当中
    for (var i = 1; i <= 6; i++) {
      var a = require("../../../assets/images/title" + i + ".jpg");
      this.imgList.push(a);
    }
}

TitleContentShow(index) {
   // 点击显示整个showBgc
      this.imgIndex = index;
      var showimg = document.querySelector(".showBgc");
      showimg.style = "display: block;";
    },

```

### 3、vue动态数据绑定

![image-20210118102846568](C:\Users\user\AppData\Roaming\Typora\typora-user-images\image-20210118102846568.png)



```javascript
<template>
  <div class="home">
    <div class="home_first">Home</div>
    <div :class="wenzi1">文字颜色</div>
    <div :class="{ wenziys: false, wenzidx: true }">文字颜色</div>
    <div :class="['wenziys', 'wenzidx']">文字颜色</div>
    <div :class="[wenzi1, wenzi2]">文字颜色</div>
  </div>
</template>

<script>
import HelloWorld from "@/components/HelloWorld.vue";

export default {
  name: "Home",
  data() {
    return {
      wenzi1: "wenziys",
      wenzi2: "wenzidx",
    };
  },
  components: {
    HelloWorld,
  },
};
</script>

<style lang="less" scoped>
.wenziys {
  font-size: 18px;
  color: red;
}
.wenzidx {
  background-color: blueviolet;
  margin: 10px auto;
}
</style>

```

### 4、vue点击当前路由

```javascript
点击当前路由标签的状态
// todo 使用全局索引 若当前路由的路径等与控制器中某一个的索引 则会记住当前的一个状态 刷新不改变
this.$parent.selectedIndex = this.controllerList.findIndex(i => i.route === this.$route.name)

// 获取路径上面的地址 只要用到就会记住加载
this.selectedIndex = this.tabList.findIndex( (i) => this.$route.fullPath.indexOf(i.route) !== -1 );

```

### 5、vue排他操作

```javascript
<li v-for="(m, index) in headMenuList"
    :class="currentIndex == index ? 'active' : null"
    @click="bar(index)"
    :key="index"       
>
```

### 6、vue 自定义局部指令

```javascript
---------------------------------------------------
    p v-lower-word="world1"></p>
---------------------------------------------------
//自定义局部指令
  directives: {
    "lower-word"(el, binding) {
      el.textContent = binding.value.toLowerCase();
    },
  },
```



### 7、vue>ul>li中的图片插入

```javascript
      var EquipmentImg = document.querySelectorAll(".equipment_right>ul>li");
      EquipmentImg.forEach((i, index) => {
        var a = require("../../../assets/images/equipment" +
          (index + 1) +
          ".png");
        i.style = "background:url(" + a + ")no-repeat !important";
      });
```



### 8、点击显示不同图片

```javascript
<ul>
    <li
         @click="selectedIndex = index"
         v-for="(i, index) in tabList"
         :key="index"
         :style="
                'background:url(' + (selectedIndex == index ? i.activeImg : i.img) + ')no-repeat !important;background-size: 100% 100% !important;'">
          <router-link :to="{ name: i.route }"> </router-link>
       </li>
</ul>
```



### 9、点击索引显示对应样式

```javascript
-----------------------------------------------
<ul>
    <li v-for="(i, index) in routeData" @click="selectedIndex = index">
      <a  @click="changeRoute(i.route)"
    :style=" selectedIndex === index? 'color:rgb(248, 187, 77) !important;': 'color:white !important;'">{{ i.name }}
		</a>
    </li>
</ul>
-----------------------------------------------
changeRoute(routeName){
     this.$route.push( routeName );       
}
-----------------------------------------------
  selectedIndex:0
```



### 10、刷新页面保持不变

```javascript
// todo 使用name进行
this.selectedIndex = this.routeData.findIndex(
    (i) => this.$route.name === i.route
);
// todo 使用路径判断
this.selectedIndex = this.routeData.findIndex((i)=> this.$route.fullPath.indexOf(i.route) !=-1  )

```



### 11、路由加载

```javascript
 ---------------------写在全部子路由中总的父亲上面(product)-----------------------------
<router-view v-slot="{ Component }">
      <component v-if="!$route.meta.keep" :is="Component" />
      <keep-alive>
        <component v-if="$route.meta.keep" :is="Component" />
      </keep-alive>
    </router-view>
--------------------------------在App.vue中-------------------------------------------
    <router-view v-slot="{ Component }"> </router-view>
---------------------------------index.vue-------------------------------------------
   <div>
    <router-view v-slot="{ Component }">
      <keep-alive>
        <component :is="Component" />
      </keep-alive>
    </router
```



### 12、定义EventBus

```javascript
-------------------app.vue---------------------------

import Bus from './utils/Bus'
app.config.globalProperties.$Bus = new Bus()

--------------------Bus.ts--------------------------------

export default class Bus {
    list:{[key:string] : Array<Function>}
    constructor(){
        this.list ={}
    }

    $on(name:string,fn:Function){
        this.list[name] = this.list[name]||[]
        this.list[name].push(fn)
        console.log(name,fn);
        
    }
    $emit(name:string,data?:any){
        if(this.list[name]){
            this.list[name].forEach((fn:Function)=>{
                fn(data)
            })
        }
        console.log(name,'emeit');

    }
    $off(name: string) {
		if (this.list[name]) {
			delete this.list[name];
		}
	}
}



--------------------全新优化的EventBus------------------------
将传入的对象变成一个对象
创建的方法也同为对象 下面的方法名为这个方法名字命名

----------------------整体的一个结构---------------------------------------
    
data{
    search:{
        findName:findName;
        findAge:findAge;
    }
}
class EventBus {
    data: { [key: string]: any } = {};
    $on(name: string, fn: Function) {
      this.data[name] = this.data[name] || {};
      this.data[name][fn.name] = fn;
    }
    $emit(name: string, fnName: string, data?: any): void {
      if (this.data[name]) {
        this.data[name][fnName](data);
      }
    }
  }

  -------------------------------------------------------
class EventBus {
  data: { [key: string]: any } = {};
  $on(name: string, fn: Function) {
    this.data[name] = this.data[name] || {};
    this.data[name][fn.name] = fn;
    console.log(this.data);
  }
  $emit(name: string, fnName: string, data?: any) {
    if (this.data[name] && this.data[name][fnName]) {
      this.data[name][fnName](data);
      return "ok";
    } else return "no Find";
  }
}




```

### 13、本地地址和网上地址

```javascript
----------------------------------APP.VUE------------------------------------------------------------------
const local = "http://192.168.1.100:3004/huaxigangtie/huaxigangtie.json";
const net = "https://test2-1303915342.cos.ap-shanghai.myqcloud.com/huaxigangtie/huaxigangtie.json";
app.config.globalProperties.$model = local;
app.config.globalProperties.$net = net;
```



### 14、VUEX状态管理触发事件

```javascript

npm install vuex -save
import Vuex from "vuex"
vue.use(Vuex)

const store = new Vuex.stroe({
    //里面存放着 state mutations actions get mudules
    state:{ count:0 }
})

//最后需要使用则需要挂载到vue实例当中

new Vue({
    // el->指定的控制区域
    el:'app',
    // render渲染了app根组件
    render:h => h(app),
    // 挂载路由
    router,
    // 将共享数据对象挂载在vue中
    // 之后组件 就可以直接在全局中获取
    store
})

status(状态)--仓库
//仓库里面放了很多对象。其中state就是数据源存放地，对应于一般Vue对象里面的data
Get(得到)--获取 监视器
//getters 可以对State进行计算操作，它就是Store的计算属性
Mutation(突变)-- 同步改
Action(行动)-- 异步
//Action 可以包含任意异步操作
Module(模块)--模块化

-------------------------------------------
// 设置一个状态
    state: {
    isLoad: false,
  },
  mutations: {
    changeLoad(state, flag) {
      state.isLoad = flag;
    },
  },
-------------------------------------------
this.$store.commit("changId",flag)
其中改变flag的 true 或 false 会触发事件


this.$Bus.$on("changeCamera",()=>{
    change.CameraAnimate([154, 73, -14], [4.25, -10, -13], 3);
})

// 打印 this.$store.status.isLoad 看是否为true
console.log(this.$store.status.isLoad,"this.$store.status.isLoad");
// 状态 为true执行下面操作
if(!this.$store.state.isLoad) return;
this.$Bus.$emit("changeCamera");

import { createStore } from 'vuex'

export default createStore({
  state: {
    Admin: '',
  },
  mutations: {
    AdminLogin(state, Admin) {
      state.Admin = Admin
    },
  },
  actions: {},
  modules: {},
})
        
加入数据        
this.$store.commit("AdminLogin",res.data.ad);
        
this.$store.state.Admin = ''
```

### 15、vue中无缝滚动

```javascript
    kehuListScroll() {
      var kehuList = document.querySelector(".kehu_menu").childNodes[0];
      var height = kehuList.childNodes[0].childNodes[0].clientHeight;
      var a = 5;
      var time = setInterval(() => {
        if (!this.isdingdanEcharts) return;
        a += height + 10;
        this.kehuScrollIndex = a;
        kehuList.style =
          "transition:all .5s;transform:translateY(" + -a + "px)";
        if (a >= (height + 10) * 10) {
          setTimeout(() => {
            kehuList.style = "transform:translateY(0px)";
            a = 5;
          }, 500);
        }
        // console.log(kehuList);
      }, 2000);
    }
```

### 16、模块化暴露Export

```javascript
test.js-------------------
let a = "第一位";
let b = "第二位";
let c = "第三位";
let d = "第四位";

// export default a;
// export { a };
// module.exports = c;
// export { a, b, c, d };  

test1.js-----------------------
    
import a from "./test";

import { a } from "./test";

let cc = require("./test");

import * as newcc from "./test";

```



### 17、遍历ul li中添加背景图片

```javascript
--------------------遍历添加背景图片-------------------------------------------
:style="{
     background: 'url(' + i.img + ') no-repeat center center',
     'background-size': '100% 100%',
 }"

-----------------------数组require存路径--------------------------------------
  lunboList: [
   { img: require("../../assets/img/lunbo4.png") },
],
      
      
-------------------------------普通的----------------------------------------------      
      
  background: url("../../assets/img/c++.png") no-repeat;
  background-size: 100% 100%;
```



### 18、引入video组件

```javascript
首先是npm i vue-video-player -D 安装依赖
在main.js中
---------------------------------------------------
import VideoPlayer from "vue-video-player/src";
import "video.js/dist/video-js.css";
import "vue-video-player/src/custom-theme.css";

app
  .use(store)
  .use(VideoPlayer)
  .use(router)
  .mount("#app");

2342+7117+119+9374
```

### 19、Vue的eventBus()

```javascript

/* 声明事件 */ -----------//    $on
this.$Bus.$on("removeCamera", a);

/* 触发事件 */------------//    $emit
this.$Bus.$emit("removeCamera");

-----------------------------------------------------Bus.js----------------------------------------------------------

class Bus {
  constructor() {
    this.list = {
      stopFactoryTimer(status) {},
    };
  }
  $on(name, fn) {
    this.list[name] = fn;
  }

  $emit() {
    if (this.list[arguments[0]] === undefined) throw Error("请先挂载在使用");
    let dataList = [...arguments].slice(1);
    return this.list[arguments[0]](...[...arguments].splice(1));
  }
  $off(name) {
    if (this.list[name]) {
      delete this.list[name];
    }
  }
}
export default new Bus();

------------------------------------------------------Bus.js----------------------------------------------------------


------------------------------------------------------Bus.ts----------------------------------------------------------

export default class Bus {
    
    list:{[key:string] : Array<Function>}
    constructor(){
        this.list ={}
    }

    $on(name:string,fn:Function){
        this.list[name] = this.list[name]||[]
        this.list[name].push(fn)
    }

    $emit(name:string,data?:any){
        console.log(this.list);
        if(this.list[name]){
            this.list[name].forEach((fn:Function)=>{
                fn(data)
            })
        }
    }
    $off(name: string) {
		if (this.list[name]) {
			delete this.list[name];
		}
	}
}

----------------------------Bus.ts----------------------------------------------------------

/******************************************************************************************/

----------------------------VUE2.0----------------------------------------------------------

import Bus from "./utils/Bus.js";

Vue.prototype.$Bus = Bus;

----------------------------VUE2.0----------------------------------------------------------
/******************************************************************************************/



/******************************************************************************************/
----------------------------VUE3.0----------------------------------------------------------
import { createApp } from 'vue'
import Bus from './untils/Bus.js'

const app = createApp(App)

app.config.globalProperties.$Bus = Bus
app
  .use(store)
  .use(VideoPlayer)
  .use(router)
  .mount('#app')
----------------------------VUE3.0----------------------------------------------------------
/******************************************************************************************/






mian.js引入Bus组件
--------------------------------------------------------
import { createApp } from 'vue'
import App from './App.vue'
import router from './router'
import store from './store'
import axios from 'axios'
import Bus from './utils/Bus'
import "./assets/css/reset.css";
import "./test1.js"

var echarts = require("echarts");

const app = createApp(App)
const local = "http://192.168.1.100:3004/huaxigangtie/huaxigangtie.json";
const net = "https://test2-1303915342.cos.ap-shanghai.myqcloud.com/huaxigangtie/huaxigangtie.json";
app.config.globalProperties.$model = local;
app.config.globalProperties.$net = net;


app.config.globalProperties.$echarts = echarts
app.config.globalProperties.$http = axios
app.config.globalProperties.$Bus = new Bus()
app.use(store).use(router).mount('#app')


const express = require("express");
const router = express.Router();
const multer = require("multer");



/* 上传文件准备使用到 Multer 是一个 node.js 中间件，用于处理 multipart/form-data 类型的表单数据 */
let upload = multer({
  storage: multer.diskStorage({
    // 设置路径
    destination: function (req, file, cb) {
      cb(null, "./uploads");
    },
    filename: function (req, file, cb) {
      var year = new Date().getFullYear();
      var month = new Date().getMonth() + 1;
      var date = new Date().getDate();
      var hours = new Date().getHours();
      var minutes = new Date().getMinutes();
      var second = new Date().getSeconds();

      var changedName =
        year +
        "-" +
        month +
        "-" +
        date +
        " " +
        hours +
        ":" +
        minutes +
        ":" +
        second +
        "--->" +
        file.originalname;
      cb(null, changedName);
    },
  }),
});

//单个文件上传
router.post("/single", upload.single("singleFile"), (req, res) => {
  //   console.log(req.file.path, "req.file.path");
  res.json({
    code: "0000",
    type: "single",
    originalname: req.file.originalname,
    path: req.file.path,
  });
});

//多个文件上传
router.post("/multer", upload.array("multerFile"), (req, res) => {
  console.log(req.files);
  let fileList = [];
  req.files.map((elem) => {
    fileList.push({
      originalname: elem.originalname,
    });
  });
  res.json({
    code: "0000",
    type: "multer",
    fileList: fileList,
  });
});

module.exports = router;


```

### 19-1、code插件的安装提示行 ui

![image-20210408092714282](C:\Users\user\AppData\Roaming\Typora\typora-user-images\image-20210408092714282.png)

### 19-2、最后.VUE的生命周期：

```javascript
全新项目：        
new vue 

获取 data()数据 -->created
        
获取dom -->beforeMount

新建事件方法 -->mounted

销毁vue
        -->beforeCreate
        -->created
        -->beforeMount
        -->mounted 
        -->beforeUpdate
        -->Updated
        -->beforeDestory
        -->Destoryed



export {a}
import {a} from "./test"

export default b
import newb from "./test"

modules default  = c
let xx = require("./test")

export {a,b,c,d}


keep-live-------Vue3.0中


    <router-view v-slot="{ Component }">
      <keep-alive>
        <component :is="Component" />
      </keep-alive>
    </router-view>



```

### 20、事件中物体循环动画的代码参考

```javascript
/*设置一个定时器*/
	let rot = 0;
        setInterval(() => {
          rot += 0.01;       //(看情况而加)
          rot = (rot % Math.PI) + 0.001;// 控制频率
            i.position.y = Math.sin(rot) + 10; // 初始值大小
        }, 5); //设置频率的

```

### 21、myplugin插件的安装

```javascript
// 格式 myplugin
myplugin.install = function(vue,options){
    1、可以定义全局的方法以及属性
   	Vue.myglobalMethod = function(){
        
    }
    2、可以定义全局的状态数据
    Vue.directive('my-directive',{
        bind(el,binding,vnode,oldVnode){
            
        }
    })
    3、插入一些组件选项
    Vue.mixin({
        created:function(){
            
        }
    })
    4、添加实例的一些方法
    Vue.prototype.$myMethod = function(options){
        
    }
}

```

### 22、Vue的代理

```javascript
  saveArchive: function(proxyData1, proxyData2) {
       proxyData1.数据1 = progressData.loaded;
       proxyData1.数据2 = progressData.total;
       proxyData2.数据URL =  "http://editorpublish.linktwins.com/index.html?archive=" + uploadUrl;
  },     


      // 声明一个对象
      let other = {};
	 // 设置一个代理
      let preservation1 = new Proxy(
        // 先把需要的数据声明
        { 数据1: 0, 数据2: 0 },
        {
          get(target, key, value) {},
          set(target, key, value) {
            // 使key和value对应上
            other[key] = value;
            num = (num * 100).toString().substring(0, 4);
            other.num = num;
            return true;
          },
        }
      );
      let preservation2 = new Proxy(
         // 先把需要的数据声明
        { url: "" },
        {
          get(target, key, value) {},
          set(target, key, value) {
            other[key] = value;
            let preservationUrl = other.url;
            other.preservationUrl = preservationUrl;
            return true;
          },
        }
      );

```

### 23、Call Apply Bind

```javascript
call apply bind 方法:
原对象.方法.call("想要的新对象里的this","实参一","实参二")
原对象.方法.apply("想要的新对象里的this",["实参一","实参二"])
原对象.方法.bind("想要的新对象里的this","实参一","实参二")()
原对象.方法.bind("想要的新对象里的this",["实参一","实参二"])()
```

### 24、前端知识点--规范

```javascript
//css3样式
display:none;
display:block;
display:flex;
display:inline;
// 内敛块元素
display:inline-block;

// 需要和diaplay:flex配合
justify-content: space-around;
justify-content: center;
```

### 24、存放数值标识符放入到路由名上

```javascript
// 设置它的路由的对应的名
this.UrlIndex ="/learn/video?num="+i;
// this.$route.query.num对应的就是它的值
var URL = this.urlAddress[this.$route.query.num].url
// 跳转路由
this.$router.push("/enviroment-data-system?num=" + floor);
```

### 25、页面缓存

```javascript
// 首先在的app.vue里面
   <keep-alive>
      <router-view v-if="$route.meta.keep"></router-view>
   </keep-alive>
      <router-view v-if="!$route.meta.keep"></router-view>
// router
---index.js
   添加一个:meta: { keep: true },
// 放在需要缓存的页面上
    <!-- 组件将被缓存 -->
  <keep-alive>
      <router-view></router-view>
  </keep-alive>

```

### 26、props父传子

```javascript
// 父组件
<template>
  <div>
    // 父组件上绑定一个msg对应需要传的一个值或者对象 :message对应的是子组件的props要接收到的值 进行数据的获取！
    <Test :message="msg"></Test>
  </div>
</template>
<script>
// 引入子组件
import Test from "./../components/test";
export default {
  components: {
    Test,
  },
  data() {
    return {
      // 数据
      msg: { msg1: "这边是props的测试数据", msg2: "这边是props的测试数据2" },
    };
  },
  mounted() {
    xx.test1 = "测试第一个数据";
  },
};
// 子组件
<template>
  <div class="test">{{ message.msg1 }}</div>
</template>
<script>
export default {
  data() {
    return {};
  },
  // props接收传的信息
  props: ["message"],
  mounted() {
    console.log(this.$props, "这个是this.$props");
  },
};
</script>


```

### 27、CSS滚动滑块

```javascript
//::-webkit-scrollbar — 整个滚动条.

//::-webkit-scrollbar-button — 滚动条上的按钮 (上下箭头).

//::-webkit-scrollbar-thumb — 滚动条上的滚动滑块.

//::-webkit-scrollbar-track — 滚动条轨道.

//::-webkit-scrollbar-track-piece — 滚动条没有滑块的轨道部分.

//::-webkit-scrollbar-corner — 当同时有垂直滚动条和水平滚动条时交汇的部分.

//::-webkit-resizer — 某些元素的corner部分的部分样式(例:textarea的可拖动按钮).

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Document</title>
  </head>
  <style>
    /* 整个滚动条 */
    ::-webkit-scrollbar {
      width: 15px;
      height: 0px;
      /*背景色*/
      background-color: rgb(255, 255, 255);
    }
    ::-webkit-scrollbar-thumb {
      /*滚动条颜色 右侧*/
      /* border-radius: 0px;
      background-color: rgb(193, 193, 193); */
      /*滚动条里面小方块*/
      border-radius: 3px;
      background-color: skyblue;
      background-image: -webkit-linear-gradient(
        45deg,
        rgba(255, 255, 255, 0.2) 25%,
        transparent 25%,
        transparent 50%,
        rgba(255, 255, 255, 0.2) 50%,
        rgba(255, 255, 255, 0.2) 75%,
        transparent 75%,
        transparent
      );
    }

    ::-webkit-scrollbar-track {
      /*滚动条里面轨道*/
      border-radius: 3px;
      box-shadow: inset 0 0 5px rgba(0, 0, 0, 0.2);
      background: #ededed;
    }

    ::-webkit-scrollbar-button {
      /* 上下的按钮 */
      height: 0px;
      background: rgb(193, 193, 193);
    }
    ::-webkit-scrollbar-track {
      /* 滚动条轨道 */
      background-color: rgb(241, 241, 241);
    }
    div::-webkit-scrollbar-track-piece {
      /* 滚动条没有滑块的轨道部分. */
      width: 10px;
    }
    div {
      width: 500px;
      height: 600px;
      /* 整个div的框框背景 */
      background-color: rgb(222, 235, 243);
      /*滚动*/
      overflow: scroll;
    }
  </style>
  <body>
    <div class="scro">
      <ul>
        <li>滚动条1</li>
        <li>滚动条2</li>
        <li>滚动条3</li>
        <li>滚动条4</li>
        <li>滚动条5</li>
        <li>滚动条6</li>
      </ul>
    </div>
  </body>
</html>

```



# Element-plus学习

## 1.初始化引入elment-puls的包

```javascript
1.在src下面新建plugins包新建elements.ts文件
-----------------------------------------------------
import ElementPlus from "element-plus";
import "element-plus/lib/theme-chalk/index.css";

console.log(ElementPlus,"ElementPlus");

export default (app: any) => {
  app.use(ElementPlus);
};
----------------------------------------------------

2.mian.js引入方法
import installElementPlus from "./plugins/element";
const app = createApp(App);
installElementPlus(app);

app
  .use(store)
  .use(VideoPlayer)
  .use(router)
  .mount("#app");

----------------------------------------------------

3.mian.ts引入方法
import installElementPlus from './plugins/element'
var app = createApp(App)
installElementPlus(app)
----------------------------------------------------
4.注意    "element-plus": "^1.0.2-beta.35" 的版本问题 如果有未定义的defind的情况
    	npm uninstall element-plus 
         npm i element-plus
```

# 递归学习：

```javascript
Three.Js中举例子
//自己调用自己一直到能找到目标值
this.deepFindInfo = (model, type) => {
    let deep = (model, type) => {
      // 如果能够找到的话就直接返回
      if (model[type] !== undefined) {
        return model[type];
      } else if (model.parent.type === "Scene") {
        return undefined;
      } else {
        // 不能找到的话可以去他父亲身上去找
        return deep(model.parent, type);
      }
    };
    return deep(model, type);
  };
```

# 正则表达式：

```javascript
 let { name, age, sex, phone } = this.newPerson;
      //1.验证
      if (name == "") {
        alert("姓名不能为空!");
        return;
      }
      if (age > 100 || age <= 0) {
        alert("年龄错误!");
        return;
      }
      if (!/^1[3456789]\d{9}$/.test(phone)) {
        alert("电话错误!");
        return;
      }
      //2.插入数据
      this.persons.unshift(this.newPerson);
      //3.清空数据
      this.newPerson = { name: "", age: "", sex: "男", phone: "" };
```



## 自我学习：

# Git学习：

## 1、步骤：

```javascript
1、$ git clone https://www.baidu.com/

2、$ git branch -v查看所有分支

---git branch dev创建一个dev
---git chekout dev切换分支
---git branch -b ---创建分支并跳转分支

3、$ git pull 下拉分支

4、$ git checkout -b dev remotes dev/origin/dev 切换到dev的分支

5、$ git add. 添加所以的新建项目

6、$ git commit -m "上传备注信息"

7、$ git push 上传

菜鸟学习网站：https://www.runoob.com/git/git-tutorial.html

```



```javascript
/*git的命令行*/
git branch dev/xx
git clone 网址 
    
git commit -m 提交的内容
git pull origin dev/xx （先拉下->解决冲突->git add .（重新提交））
git push origin dev/xx 
git status（查看当前git的状态）

git init
git add .
git commit -m 修改的内容
git remote add origin 测试的网址
git push origin
```



# node.js：

```javascript
学习视频地址：https://www.cnblogs.com/best/p/6204116.html#_label8

https://www.bilibili.com/video/BV1Ns411N7HU?p=13
```



### 1、加载使用require

```javascript
运行：

nodemon index.js

------------------注意点是node.js都是回调函数----------------------

---------node.js读取文件 Api-------------
1.使用require方法加载fs的核心模块
  var fs = require('fs');

2.使用redFile方法进行读取文件路径
    第一个参数为文件的路径-------------
    第二个参数是一个回调函数-----------
	error	 
		如果读取失败了，error就是错误对象
         如果读取成功，error就是Null
    data
     	如果读取成功了,data就是读取到的数据
	    如果读取失败了,error就是错误对象
	 -----------------------------------------------
	 成功  data是数据 error就是Null
  	 失败  data就是null errror错误对象
     -----------------------------------------------
     fs.readFile('路径',function( error,data ){
      console.log( data.toString() );
  });
3.写文件
	第一个是路径 第二个是内容 第三个参数是回调函数
    成功：
    	文件写入成功
        error是null
    失败:
		error是错误对象
         data是null
    var fs = require('fs');
    fs.wirteFile('路径.md',"这边是内容信息",function(error){

    });

fs---文件
cors---跨域
body-perser---bodyParser.urlencoded()---bodyParser.json()---字符转码
path---路径
multer---文件上传
uuid---用户id

node.js的执行顺序---
1.引入文件
2.链接数据库
3.进行配置
4.使用插件
5.挂载路由
6.监听端口

--------------------Http创建服务器-----------------------------------
node开启服务器
1、加载node的核心代码为http
var http = require("http");

2、使用http.createServer()创建一个Web服务器
										并且返回一个Server的一个实例
var server = http.createServer();

3、服务器提供服务 
    对于数据的服务 -- 图片 视频 数据
    发送请求
    接受请求
    处理请求
    给予反馈（发送请求）
    注册请求事件 
    当客户端请求过来 就会触发服务器的request的请求 可以执行第二个参数 回调处理
server.on('request',function(){
    	console.log('收到服务器传来的数据了');
})

4、绑定端口号 启动服务器
server.listen(3000,function(){
    console.log('  服务器启动成功了！可以通过 http://127.0.0.1:3000/来访问  ')
    
})

// request请求成功后会传入俩个参数
    Requerst
    	获取客户端的一些请求信息 比如说是请求路径
    Response
    	响应对象可以用来给客户发送响应

server.on("require",function(reqest,response){
    
    response.write("响应中...");
    
})

//respenon有一个方法：write可以给客户端发送响应的数据
//write可以使用很多次 但是最后一定要使用end来结束响应 否则客户端会一直等待

------------------------------------------------------------------------
var http = require('http');

var server = http.createServer();

server.on('request',function(request,response){
	console.log("收到信息 并且路径为："+ request.url);
	response.write('hello');
	response.write("world");
	response.end("这个是结束了");
	
})

server.listen(3000,function(){
	console.log('服务器启动成功！可访问 http://127.0.0.1:3000/ 访问');
})
------------------------------------------------------------------------

require是一个方法 作用是用来加载模块的 到处模块化的对象
    Node的模块有三种：
        核心模块比如 fs、http、用户自己编写的文件模块
            Node没有全局的作用域  只有模块作用域 
            外部访问不到内部
            内部访问不到外部
            默认都是封闭的
        加载文件里面的代码 是为了使用里面的方法
需要将模块化联通起来必须使用exports暴露 在使用require获取


```



![image-20210305093714801](C:\Users\user\AppData\Roaming\Typora\typora-user-images\image-20210305093714801.png)

### 2、简单的一个Node后台：

```javascript
var express = require("express");
// 实现的跨域的问题
var cors = require("cors");
var app = express();

app.use(cors());
app.use(express.static("./static"));

app.listen(3004, (_) => {
  console.log(_ ? "错误" : "ok");
});


//执行命令行
node index.js
npm i cors express

----------------使用的json文件----------------------------
http://127.0.0.1:3004/hospital/hospital.json
https://test-1303915342.cos.ap-nanjing.myqcloud.com/hospital.json


var express = require("express");
var cors = require("cors");
var app = express();

app.use(cors);

app.use(express.stattic("./static"))
app.listen('3000',function(){
    
})
---------------------------------------------------------------------------------------------

database
----------------index.js-------------
// 其中 mongoose 需要安装 npm i mongoose
let mongoose = require("mongoose");
mongoose
  .connect("mongodb://localhost/nodeTest", {
    useNewUrlParser: true,
    useUnifiedTopology: true,
  })
  .then(() => {
    console.log("成功");
  })
  .catch((err) => {
    console.log("失败", err);
  });

-------------user.js-----------------
let mongoose = require("mongoose");
let UserSchema = mongoose.Schema({
  user: {
    type: String,
    require: true,
  },
  psw: {
    type: String,
    require: true,
  },
  uuid: {
    type: String,
    require: true,
  },
});

const User = mongoose.model("User", UserSchema);
module.exports = User;


------------index.js------------------
let express = require("express");

let cors = require("cors");
var bodyParser = require("body-parser");
let Uuid = require("uuid1");
let app = express();
require("./database");
let User = require("./database/user");
app.use(cors());
app.use(bodyParser.json());
app.use(bodyParser.urlencoded({ extended: false }));

app.get("/test", function (req, res) {
  res.send({ status: 200, data: [1] });
});
app.post("/login", async (req, res) => {
  let data = req.body;

  if (data.user.trim() === "chen" && data.psw.trim() === "123") {
    let uuid = Uuid.UUID1();

    data.uuid = uuid;

    let re = await User.create(data);
    console.log(re);
    res.send({ status: 200, uuid: uuid });
  } else {
    res.send({ status: 400 });
  }
});

app.get("/find", async (req, res) => {
  console.log(req.query);
  let re = await User.findOne({ uuid: req.query.uuida });
  console.log(re);
});
app.get("/delete", async (req, res) => {
  console.log(req.query);
  let re = await User.deleteOne({ uuid: req.query.uuida });
  console.log(re);
});
app.get("/updata", async (req, res) => {
  console.log(req.query);
  let re = await User.updateOne(
    { uuid: req.query.uuida },
    { user: "chencheng" }
  );
  console.log(re);
});
app.listen(3000, function (err) {
  console.log("OK");
});

------------------------------------------------------------------

let express = require("express");
let user = express.Router();
let User = require("../db/model/user");
let uuid = require("uuid1");
let bc = require("bcryptjs");
let jwt = require("jsonwebtoken");
const SECRET = "asbjkasbnajksnkjasnk";
let timeOut = 60 * 60 * 24;
user.get("/test", (q, s) => {
  s.send({
    status: 200,
  });
});
user.post("/register", async (q, s) => {
  let { body } = q;
  body.uuid = uuid.UUID1();
  let find = await User.findOne({ name: body.name });
  if (find !== null) {
    return s.send({
      status: 401,
      msg: "该应户名已被占用",
    });
  }
  User.create(body).then((val) => {
    console.log("register", val);
    s.send({
      status: 200,
    });
  });
});
user.post("/login", async (q, s) => {
  let { body } = q;
  let user = await User.findOne({ name: body.name });
  if (user === null) {
    return s.send({
      status: 402,
      msg: "账号或密码错误",
    });
  }
  let isLogin = bc.compareSync(body.psw, user.psw);
  let token = jwt.sign(
    {
      id: String(user._id),
    },
    SECRET,
    {
      expiresIn: timeOut,
    }
  );
  if (isLogin) {
    return s.send({
      msg: "登陆成功",
      token: token,
      status: 200,
    });
  } else {
    s.send({
      status: 402,
      msg: "账号或密码错误",
    });
  }
});
user.get("/valid_token", (q, s) => {
  let { query } = q;
  jwt.verify(query.token, SECRET, "", (e, res) => {
    s.send({
      status: e === null ? 200 : 400,
    });
  });
});
module.exports = user;






```



### 3、  nodemon命令行加载不出来的问题

![image-20210420092250543](C:\Users\user\AppData\Roaming\Typora\typora-user-images\image-20210420092250543.png)

# 类封住函数标准：

## 1.标准写法

```javascript
或者引入外部内容
export class ChangeInterface extends Public{}
-------------------------------Change.JS-----------------------------
// 声明类
export class ChangeInterface {
  constructor(assets) {
    this.fn = new ChangeFn(assets);
  }
  change() {}
  add() {
    this.fn.xxx();
  }
}
// 声明构造函数
var ChangeFn = function(assets) {
  let { camera, controls, scene } = assets;
};


---------------------------APP.JS-----------------------------------
    // 传出我们所需要的scene、camera、controls
    this.assets = () => {
      return {
        scene: scene,
        camera: camera,
        controls: controls
      };
    };
    //资源文件scene/camera/controls
    this.staticAssets = {};

```

### app.js中

```javascript
prettierrcl
文件添加
{
    "semi":false,
    "singleQuote:true"
}
```



## 2.调用导入的js文件

```javascript
//可传参F
-------------------接受导入的函数----------------------------------------------
let a = new ChangeFn(传入的参数);
a.test();
----------------------需要导入的js---------------------------------------------
//todo 可以调用js文件中的this的方法 但是不可以调用直接的function函数
var ChangeIn = function(可传入参数){
    this.test = () =>{
        console.log("这边是需要导入的js文件");
    }
}
```





```javascript

let {name,age,sex,phone} = this.newPerons;

this.perons.unshift(this.newPerons);

this.perons = {name:"",age:"",sex:"男,phone:"");
               
this.perons.splice(index,1);

path.extname('c:/a/b/c');


function ChangeInterface(assets) {
  let { scene, camera, controls, eventBus, renderer, dom } = assets;
  this.initTheScene = () => {
    this.addAllRoofSprite();
  };
  this.addAllRoofSprite = () => {
    let mappingNumberToComponyName = {};
    const buildingGroup = scene.getObjectByName("BuildingJanmo");
    // console.log(buildingGroup.children, "+++");
    buildingGroup.children.forEach((i, index) => {
      const modelNumber = i.name.replace(/[^0-9]/gi, "");
      console.log(modelNumber);
      if (!modelNumber) return;
      mappingNumberToComponyName[modelNumber] = undefined;
    });
    Object.keys(mappingNumberToComponyName).map(i =>
      console.log(i, mappingNumberToComponyName[i])
    );
  };
}

export default ChangeInterface;
```



![image-20210221101413607](C:\Users\user\AppData\Roaming\Typora\typora-user-images\image-20210221101413607.png)

![image-20210221101527622](C:\Users\user\AppData\Roaming\Typora\typora-user-images\image-20210221101527622.png)

```javascript

    inintOrde() {
   		this.SelectIndex = this.tabList.findIndex((i)=> i.route == this.$route.name)
    },
```



```javascript
1.房子总价140万(包含增值税7万+个税契税(3万))
	首先我们除掉个税、契税就是137万 (其中137里的7万是房东拿出来交税)
    首付41万 137-41=96万
    剩下96万贷款
    总结就是137万（房东包税 房东只能拿到130万）
```



# 在线音频转码

```javascript
网址：https://convertio.co/zh/
```

# 在线视频观看磁力链接

```javascript
一刻：http://www.yikedy.co/
```

# ES6语法

### 1、具体的知识点：

```javascript
1、let const var 之间的区别
2、解构赋值
3、箭头函数
4、类的生命
5、字符串模板
```



### 2、new promise

```javascript
//异步处理
new promise().then(res=>{
    
}).catch(err=>{
    
})

promise.resolve()  现有的东西转换为promise对象 //成功的状态
promise.reject()  现有的东西转换为promise对象 //失败的状态

new promise().then(res,=>{ 
    console.log(res)
}).catch(err=>{
    console.log(rej)
})

let t1 = Promise.resolve("a")
let t2 = Promise.resolve("b")
let t3 = Promise.resolve("c")			

//Promise.all([t1,t2,t3]).then(res=>{
Promise.race([t1,t2,t3]).then(res=>{
    console.log(res)
}).catch(err=>{
    console.log(err)
})
Promise.all([p1,p2,p3]):打包promise放到数组中 后打包完还是一个promise对象
resolve
Promise.race([p1,p2,p3]):有一个成功的就返回
```

### 3、字符串API

```javascript
字符串-> 
// includes("str") startsWith("str") endsWith("str") repeat("str")
// 是否包含 开头 结尾 匹配重复几次(重复字符串)
字符串填充 str.padStart(整个字符串长度 在前面)     str.padEnd(整个字符串长度 在后面)
padStart 字符串填充在前面		 
padEnd 字符串填充在后面	
```

### 4、Object

```javascript
// 合并对象
Object.assign();
Object. ();
```

### 5、JS 类的简单继承

```javascript
// 需要传入原始需要的资源
一个方法函数对象 = new ChangeInterface("assets资源");
一个方法函数对象.下面的方法

//声明一个ChangeInterface方法此刻需要给父亲传一份资源 使用super传给constructor
class ChangeInterface extends father(){
    //只要ChangeInterface被调用 constructor就会被执行 它是个构造函数 调用new自动执行
    constructor(assets资源){
        super(assets资源);
        this.fn = new function1(assets资源);
        this.fn = new function2(assets资源);
    }
    function1("资源拿到"){
    }
    function2("资源拿到"){
    }
}

export default class father{
      constructor(assets资源) {
          // 其中接受的就是ChangeInterface 传过来的资源 供父类使用
          // 把资源进行解析
          let { camera, controls, scene } = assets;
      }
}

```

### 6、generator

```javascript
// gengertor-中文名-发电机 函数 解决异步 深度嵌套的功能 可以认为是一个迭代器
function* gen() {
      yield "aa";
      yield "bb";
      return "cc";
}

  let msg1 = gen();
  // gengertor return 并不会被进行遍历
  console.log(msg1.next(), "msg1-");
  console.log(msg1.next(), "msg1-");
  console.log(msg1.next(), "msg1-");
```

### 7、扩展运算符

```javascript
//结构赋:
let arr = [1, 2, 3, 4, 5, 6];值:
console.log(...arr);
//扩展运算符:

```

### 8、关于异步

```javascript
解决异步的方法:
1、发布订阅
2、定时器
3、promise
4、gengertor Axios
5、$emit $on
6、回调函数
7、async
```

### 9、async await

```javascript
解决异步的问题---async await：
// 首先的Promise的读文件------------------------------------------------
// 使用Node执行 读文件
const fs = require('fs')
const readFile = function (fileName) {
  return new Promise((res, rej) => {
    fs.readFile(fileName, (err, data) => {
      if (err) rej(err);
      res(data);
    });
  });
};

readFile("./data/a.txt")
  .then((res) => {
    console.log(res.toString());
    return readFile("./data/b.txt");
  })
  .then((res) => {
    console.log(res.toString());
    return readFile("./data/c.txt");
  })
  .then((res) => {
    console.log(res.toString());
  });
// gengertor 读文件------------------------------------------------
const fs = require("fs");

const readFile = function (fileName) {
  return new Promise((res, rej) => {
    fs.readFile(fileName, (err, data) => {
      if (err) rej(err);
      res(data);
    });
  });
};

function* gun() {
  yield readFile("./data/a.txt");
  yield readFile("./data/b.txt");
  yield readFile("./data/c.txt");
}

let msg = gun();
msg
  .next()
  .value.then((res) => {
    console.log(res.toString());
    return msg.next().value;
  })
  .then((res) => {
    console.log(res.toString());
    return msg.next().value;
  })
  .then((res) => {
    console.log(res.toString());
  });
// async await 读文件---------------------------------------------------------------------
const fs = require("fs");

const readFile = function (fileName) {
  return new Promise((res, rej) => {
    fs.readFile(fileName, (err, data) => {
      if (err) rej(err);
      res(data);
    });
  });
};

async function fn() {
  let msg1 = await readFile("./data/a.txt");
  console.log(msg1.toString(), "msg1~");
}
fn();

// 函数-----------------------------
async function fn() {
  let result = await xx;
  console.log(result);
}
fn();
//async 的特点
1.await 只能放在async里
2.相比gengertor语义化更强
3.awit后面可以是一个字符串、数组、布尔值
4.async函数返回的是一个Promise对象
5.只要await语句后面的Promise状态变成reject,那么整个async函数就会被终止

// 函数抛出一个异常
async function fn() {
    throw new Error("抛出一个错误");
}
// 处理这个异常 rej 或者 catch
	fn().then(
          (res) => {
            console.log(res);
          },
          (rej) => {
            console.log(rej);
          }
       );

fn().then((res) => {
       console.log(res);
   }).catch((rej) => {
     console.log(rej);
});

1、vue的异步方式 gengertor aysnc await promise
2、props 中间件 以及bus传值
3、h5 滚动条样式

// async await可能存在的问题是当函数中抛出错误 影响后续代码
a)
	try {
        
    }catch(e){
        
    }
b)
	Promise本身就是有catch
Promise.all()



    fs.readFile(fileName, (err, data) => {
      // 如果发生错误就返回错误信息
		if(err) rej(err)
         res(data)
    });

```

### 10、数据结构

```javascript
// let setArray = new Set(['a','b'])
数据结构
	数组
    json 二叉树
set数据结构
	类似数组 但是里面不能有重复的值
	let array = new Set()
    // 添加
    array.add('a')

    array.add('b')
	// 删除
    array.delete('b')
	// 检查有没有这个值
	array.has('a')
	// 个数或者是长度
	array.size('a')
	// 清除所有 清空
	array.clear()
Set的用法 
	new Set(['a','b'])
for...of
for( let item of  array.key()){
    console.log(item,"item")
}
```



```javascript
鞋子需求

//拆解爆炸模型	模型拆解和还原（可配置拆解后形状）也可以点击定位配置属性   可以  

//模型自转	通过按钮控制模型按中心点旋转    可以

//修改文字	修改后上片的刻印文字    1 可以

//替换材质	后上片替换皮革和翻毛皮    1 可以

//替换贴图	用户上传本地贴图移动贴图的位置生成贴图 

//替换模型	鞋带模型替换共4种系法  1 可以

//平面截图	根据用户调完的最终效果截图共6张图（截图时显示双脚）  可以

//选中镜头聚焦   用户选择部件后镜头聚焦、显示颜色数据 1 可以

//替换颜色	每个部位根据物料情况替换相对应的颜色      可以

//切换背景	替换场景背景全景图片（3张3D渲染图或照片） 1 可以

//随机数值	随机所有配制数值产生配色方案 可以

//鼠标悬停	鼠标悬停显示颜色暂定蓝色（后期可以修改）  1 舍弃

```



```javascript
// 绘制的div需要对应传的一个name名称  需要和场景里的ui进行对应
// 车间坐标
export const WORKSHOP = {
  咖啡前处理温湿度1ui: {
    domName: "咖啡前处理温湿度dom1",
    X: -5.249,
    Y: 151.376,
    Z: -15.764,
  },
  咖啡前处理温湿度2ui: {
    domName: "咖啡前处理温湿度dom2",
    X: -5.249,
    Y: 151.376,
    Z: -15.764,
  },
  咖啡前处理温湿度3ui: {
    domName: "咖啡前处理温湿度dom3",
    X: -5.249,
    Y: 151.376,
    Z: -15.764,
  },
  咖啡前处理温湿度4ui: {
    domName: "咖啡前处理温湿度dom4",
    X: -5.249,
    Y: 151.376,
    Z: -15.764,
  },
  咖啡前处理臭氧1ui: {
    domName: "咖啡前处理臭氧dom1",
    X: -5.249,
    Y: 151.376,
    Z: -15.764,
  },
  咖啡前处理臭氧2ui: {
    domName: "咖啡前处理臭氧dom2",
    X: -5.249,
    Y: 151.376,
    Z: -15.764,
  },
  咖啡前处理臭氧3ui: {
    domName: "咖啡前处理臭氧dom3",
    X: -5.249,
    Y: 151.376,
    Z: -15.764,
  },
  咖啡前处理臭氧4ui: {
    domName: "咖啡前处理臭氧dom4",
    X: -5.249,
    Y: 151.376,
    Z: -15.764,
  },
  咖啡预制填充臭氧1ui: {
    domName: "咖啡预制填充臭氧dom1",
    X: -14.101,
    Y: 150.004,
    Z: -11.767,
  },
  咖啡预制填充臭氧2ui: {
    domName: "咖啡预制填充臭氧dom2",
    X: -14.101,
    Y: 150.004,
    Z: -11.767,
  },
  咖啡预制填充温湿度1ui: {
    domName: "咖啡预制填充温湿度dom1",
    X: -14.101,
    Y: 150.004,
    Z: -11.767,
  },
  咖啡预制填充温湿度2ui: {
    domName: "咖啡预制填充温湿度dom2",
    X: -14.101,
    Y: 150.004,
    Z: -11.767,
  },
  咖啡预制填充温湿度3ui: {
    domName: "咖啡预制填充温湿度dom3",
    X: -14.101,
    Y: 150.004,
    Z: -11.767,
  },
  包装温湿度1ui: {
    domName: "包装温湿度dom1",
    X: 0.426,
    Y: 146.746,
    Z: 1.045,
  },
  干混预制填充臭氧1ui: {
    domName: "干混预制填充臭氧dom1",
    X: 20.221,
    Y: 147.543,
    Z: -8.803,
  },
  干混预制填充臭氧2ui: {
    domName: "干混预制填充臭氧dom2",
    X: 20.221,
    Y: 147.543,
    Z: -8.803,
  },
  干混预制填充臭氧3ui: {
    domName: "干混预制填充臭氧dom3",
    X: 20.221,
    Y: 147.543,
    Z: -8.803,
  },
  干混预制填充臭氧4ui: {
    domName: "干混预制填充臭氧dom4",
    X: 20.221,
    Y: 147.543,
    Z: -8.803,
  },
  干混预制填充温湿度1ui: {
    domName: "干混预制填充温湿度dom1",
    X: 20.221,
    Y: 147.543,
    Z: -8.803,
  },
  干混预制填充温湿度2ui: {
    domName: "干混预制填充温湿度dom2",
    X: 20.221,
    Y: 147.543,
    Z: -8.803,
  },
  干混预制填充温湿度3ui: {
    domName: "干混预制填充温湿度dom3",
    X: 20.221,
    Y: 147.543,
    Z: -8.803,
  },
  干混预制填充温湿度4ui: {
    domName: "干混预制填充温湿度dom4",
    X: 20.221,
    Y: 147.543,
    Z: -8.803,
  },
  干混预制填充温湿度5ui: {
    domName: "干混预制填充温湿度dom5",
    X: 20.221,
    Y: 147.543,
    Z: -8.803,
  },
  干混预制填充温湿度6ui: {
    domName: "干混预制填充温湿度dom6",
    X: 20.221,
    Y: 147.543,
    Z: -8.803,
  },
  茶前处理臭氧1ui: {
    domName: "茶前处理臭氧dom1",
    X: 24.314,
    Y: 147.523,
    Z: -1.342,
  },
  茶前处理温湿度1ui: {
    domName: "茶前处理温湿度dom1",
    X: 24.314,
    Y: 147.523,
    Z: -1.342,
  },
  茶预制填充臭氧1ui: {
    domName: "茶预制填充臭氧dom1",
    X: 24.314,
    Y: 147.523,
    Z: 4.589,
  },
  茶预制填充温湿度1ui: {
    domName: "茶预制填充温湿度dom1",
    X: 24.314,
    Y: 147.523,
    Z: 4.589,
  },
  干混前处理臭氧1ui: {
    domName: "干混前处理臭氧dom1",
    X: 50,
    Y: 190,
    Z: -34,
  },
  干混前处理臭氧2ui: {
    domName: "干混前处理臭氧dom2",
    X: 50,
    Y: 190,
    Z: -34,
  },
  干混前处理臭氧3ui: {
    domName: "干混前处理臭氧dom3",
    X: 50,
    Y: 190,
    Z: -34,
  },
  干混前处理臭氧4ui: {
    domName: "干混前处理臭氧dom4",
    X: 50,
    Y: 190,
    Z: -34,
  },
  干混前处理臭氧5ui: {
    domName: "干混前处理臭氧dom5",
    X: 50,
    Y: 190,
    Z: -34,
  },
  干混前处理温湿度1ui: {
    domName: "干混前处理温湿度dom1",
    X: 50,
    Y: 190,
    Z: -34,
  },
  干混前处理温湿度2ui: {
    domName: "干混前处理温湿度dom2",
    X: 50,
    Y: 190,
    Z: -34,
  },
  干混前处理温湿度3ui: {
    domName: "干混前处理温湿度dom3",
    X: 50,
    Y: 190,
    Z: -34,
  },
  干混前处理温湿度4ui: {
    domName: "干混前处理温湿度dom4",
    X: 50,
    Y: 190,
    Z: -34,
  },
  干混前处理温湿度5ui: {
    domName: "干混前处理温湿度dom5",
    X: 50,
    Y: 190,
    Z: -34,
  },
  干混前处理温湿度6ui: {
    domName: "干混前处理温湿度dom6",
    X: 50,
    Y: 190,
    Z: -34,
  },
  干混前处理温湿度7ui: {
    domName: "干混前处理温湿度dom7",
    X: 50,
    Y: 190,
    Z: -34,
  },
  干混前处理温湿度8ui: {
    domName: "干混前处理温湿度dom8",
    X: 50,
    Y: 190,
    Z: -34,
  },
  干混前处理温湿度9ui: {
    domName: "干混前处理温湿度dom9",
    X: 50,
    Y: 190,
    Z: -34,
  },
  干混前处理温湿度10ui: {
    domName: "干混前处理温湿度dom10",
    X: 50,
    Y: 190,
    Z: -34,
  },
  干混前处理温湿度11ui: {
    domName: "干混前处理温湿度dom11",
    X: 50,
    Y: 190,
    Z: -34,
  },
  干混前处理温湿度12ui: {
    domName: "干混前处理温湿度dom12",
    X: 50,
    Y: 190,
    Z: -34,
  },
};
```

# h5:

### 1、dom新的导航标签

```javascript
nav、header、footer、section、video、progress、article、
```

### 2、事件

```javascript
拖拽:    ondrop ondragover
		<div class="droptarget" ondrop="drop(event)" ondragover="allowDrop(event)">
			<p ondragstart="dragStart(event)" ondrag="dragging(event)" draggable="true" id="dragtarget">拖动我!</p>
		</div>
		<div class="droptarget" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
		<script>
			function dragStart(event) {
            // 开始的时候触发这个对象
				event.dataTransfer.setData("必须相同", event.target.id);
			}
			function dragging(event) {
				console.log("正在被拖~")
			}
			function drop(event) {
                // 阻止事件冒泡
				event.preventDefault();
                // 获取对应的DOM元素
				var data = event.dataTransfer.getData("必须相同");
				console.log(data,"data~~")
				event.target.appendChild(document.getElementById(data));
				console.log( event.target,"event.target" )
			}
			function allowDrop(event) {
				event.preventDefault();
			}
		</script>

在拖动目标上触发事件 (源元素):
        ondragstart - 用户开始拖动元素时触发
        ondrag - 元素正在拖动时触发
        ondragend - 用户完成元素拖动后触发

释放目标时触发的事件:
        ondragenter - 当被鼠标拖动的对象进入其容器范围内时触发此事件
        ondragover - 当某被拖动的对象在另一对象容器范围内拖动时触发此事件
        ondragleave - 当被鼠标拖动的对象离开其容器范围内时触发此事件
        ondrop - 在一个拖动过程中，释放鼠标键时触发此事件


```

### 3、进度条

```javascript
// dom 元素 
<div id="d1">
  <p id="pgv">进度：0%</p>
  <progress id="pg" max="100" value="0"></progress>
</div>


// 方法：
<script>
			function staticProgress () {
			  var pg = document.getElementById('pg')
			  var pgv = document.getElementById('pgv')
			  var timer = setInterval(function () {
				if (pg.value !== 100) {
				  pg.value++
				  pgv.innerHTML = '进度：' + pg.value + '%'
				} else {
				  pgv.innerHTML = '加载完成'
				  clearInterval(timer)
				}
			  }, 1000)
			}
			staticProgress()
</script>
```

### 4、

```javascript

<view class="page">
  <!-- <view class="nav-bar">
    <view class="title">Three-Platformize 淘宝 Demo</view>
    <view class="menu" onTap="onMenuClick">示例</view>
  </view> -->

  <!-- <view class="menu-can {{showMenu ? 'active' : ''}}">
    <view class="menu-item {{currItem === idx ? 'active' : ''}}" a:for="{{menuList}}" a:for-index="idx" a:for-item="item" data-i="{{idx}}" data-item="{{item}}" onTap="onMenuItemClick">{{item}}</view>
  </view> -->
  <view class="btnAll">
    <!-- <button onTap='testclick'  class="btn0" >点击</button> -->
  <!-- <button data-set='rotate' onTap='trigger'  class="btn1" >旋转</button>
  <button data-set='cameraZoom0'  onTap='trigger'  class="btn2" >放大</button>
  <button data-set='cameraZoom1'  onTap='trigger' class="btn3" >缩小</button>
  <button data-set='selectBgc1'  onTap='trigger'  >背景一</button>  
  <button data-set='selectBgc2'  onTap='trigger'  >背景二</button>
  <button data-set='selectBgc3'  onTap='trigger'  >背景三</button> -->
  <button data-set='shoelaces1'  onTap='trigger' >鞋带1</button>  
  <button data-set='shoelaces2'  onTap='trigger' >鞋带2</button>  
  <button data-set='shoelaces3'  onTap='trigger' >鞋带3</button>
  <button data-set='shoelaces4'  onTap='trigger' >鞋带4</button>
  <!-- <button data-set='break'  onTap='trigger' >爆炸</button> -->
  <button data-set='randomColor'  onTap='trigger' >随机颜色</button>
  <button data-set='cunTest'  onTap='trigger' >存储测试</button>
  <button data-set='fncReset'  onTap='trigger' >重置</button>
  <!-- <button data-set='replaceMaterial'  onTap='trigger' >本地贴图</button> -->
  <button data-set='addText'  onTap='trigger' >加文字</button>
  <button data-set='screenShot'  onTap='trigger' >截图</button>
  <input confirm-type="text" class="inputfield" onInput="inputFun" value="{{shoesWorld}}"  placeholder="测试输入文字" />
  
  <image mode="scaleToFill" onLoad="imgLoadFunc" src="{{imgsrc1}}"  class="img1"/>
  <image mode="scaleToFill" onLoad="imgLoadFunc" src="{{imgsrc2}}"  class="img2"/>
  <image mode="scaleToFill" onLoad="imgLoadFunc" src="{{imgsrc3}}"  class="img3"/>
  <image mode="scaleToFill" onLoad="imgLoadFunc" src="{{imgsrc4}}"  class="img4"/>
  <image mode="scaleToFill" onLoad="imgLoadFunc" src="{{imgsrc5}}"  class="img5"/>
  <image mode="scaleToFill" onLoad="imgLoadFunc" src="{{imgsrc6}}"  class="img6"/>

  </view>
  <canvas
    class="canvas"
    id="gl"
    type="webgl"
    disable-scroll
    onTap="click"
    onReady="onCanvasReady"
    onTouchStart="start"
    onTouchMove="move"
    onTouchEnd="end"
  ></canvas>

</view>
```







```javascript
import * as THREE from "./libs";
import Player from "../../three/Player";
const { _optionalChain$i,PLATFORM,GLTFLoader,FileLoader,TaobaoPlatform } = THREE;
let shoesSrcDate = {};
let onInput;
let gltfLoad = new GLTFLoader();
let fileLoader  = new FileLoader();
Page({
  data: {
    imgsrc1: '',
    imgsrc2: '',
    imgsrc3: '',
    imgsrc4: '',
    imgsrc5: '',
    imgsrc6: '',
    shoesWorldValue:''
  },
  onCanvasReady () {
    // @ts-ignore
    Promise.all([
      new Promise((resolve) =>
        my
          .createSelectorQuery()
          .select(".canvas")
          .boundingClientRect()
          .exec(resolve)
      ),
      new Promise((resolve, reject) => {
        my.createCanvas({
          id: "gl",
          success: resolve,
          fail: reject,
        });
      }),
    ])
    .then(([res, canvas]) => {
        this.initCanvas(canvas, res[0]);
      })
      .catch(() => my.alert({ content: "初始canvas失败" }));
  },
  initSenceJson(){

   // return fileLoader.loadAsync('https://test2-1303915342.cos.ap-shanghai.myqcloud.com/weixin/app.json');
  },
    // 初始化画布
   initCanvas (canvas,canvasRect,json,platform) {
     // 获取json场景文件
     const jsonMap = require("../../static/app.json");
    try {
        this.player = new Player(canvas, jsonMap).run();
        this.platform = this.player.platform;
    } catch (e) {
      console.log(e, "initCanvaseeee");
    }

  },
  // 触控开始
  start (e) {
    try {
      console.log("start事件---");
      this.platform.dispatchTouchEvent(e);
    } catch (e) {
      console.log(e, "ee");
    }
  },
  // 触动移动
  move (e) {
    try {
      this.player.triggerEvents.touchMove(e);
      console.log("move移动事件---");
      this.platform.dispatchTouchEvent(e);
    } catch (e) {
      console.log(e, "ee");
    }
  },
  // 触发离开
  end (e) {
    try {
      this.player.triggerEvents.touchEnd(e);
      console.log("end事件---");
      this.platform.dispatchTouchEvent(e);
    } catch (e) {
      console.log(e, "ee");
    }
  },
  // 加载事件
  onUnload () {
    this.disposing = true;
    _optionalChain$i([
      this,
      "access",
      (_5) => _5.currDemo,
      "optionalAccess",
      (_6) => _6.dispose,
      "call",
      (_7) => _7(),
    ]);
    PLATFORM.dispose();

  },
  // 点击事件
  trigger (e) {
    let { set } = e.target.dataset;
    this.player && this.player.dispatchEvent(set);
    // 截图的6张文件地址
    if(set==='screenShot'){
      let imgSrcList = this.player.srcAllAddress
      this.srcFunc(imgSrcList)
    }
    // 重置截图图片
    if(set==='fncReset'){
      // 将图片截图显示在图片上
      this.srcFunc();
      // 清空文字内容
      console.log("清空--");
      this.setData({
        shoesWorld: ''
      })
    }
  },
  // 输入的文字
  inputFun (res) {
    // 设置input的value值
      this.setData({
        shoesWorld: res.detail.value
      })
      this.player.shoeEvents.shoesText = this.data.shoesWorld;
      console.log(this.data.shoesWorld,'this.data.shoesWorld');
  },
  // 图片的信息
  imgLoadFunc (e) {
  // 图片的dom
    shoesSrcDate.src = this.data
    console.log(e, 'e---src');
  },
  // 图片的src插入
  srcFunc(src){
    console.log('插入图片~');
      this.setData({
        imgsrc1:src?src[0]:'',
        imgsrc2:src?src[1]:'',
        imgsrc3:src?src[2]:'',
        imgsrc4:src?src[3]:'',
        imgsrc5:src?src[4]:'',
        imgsrc6:src?src[5]:'',
      })
  },
});

export { shoesSrcDate }
```











```javascript
2021年7月22日14:00:04
import * as THREE from "./libs";
import Player from "../../three/Player";
import axios from 'axios'
const { _optionalChain$i,PLATFORM,GLTFLoader,FileLoader,TaobaoPlatform,$XMLHttpRequest } = THREE;
let shoesSrcDate = {};
let gltfLoad = new GLTFLoader();
let fileLoader  = new FileLoader();
Page({
  data: {
    imgsrc1: '',
    imgsrc2: '',
    imgsrc3: '',
    imgsrc4: '',
    imgsrc5: '',
    imgsrc6: '',
    shoesWorldValue:''
  },
  onCanvasReady () {
    // @ts-ignore
    Promise.all([
      new Promise((resolve) =>
        my
          .createSelectorQuery()
          .select(".canvas")
          .boundingClientRect()
          .exec(resolve)
      ),
      new Promise((resolve, reject) => {
        my.createCanvas({
          id: "gl",
          success: resolve,
          fail: reject,
        });
      }),
    ])
      .then(([res,canvas]) => {
      let platform  = new TaobaoPlatform(canvas);
      PLATFORM.set(platform);
      this.initSenceJson(platform)
      //   .then((json)=>{
      //     console.log(json,'jsonjson');
      //     this.initCanvas(canvas,res[0],json,platform);
      //   });
      // })
      // .catch((e) =>{console.log(e);});
      })
  },
  initSenceJson(platform){
    // console.log(platform.getGlobals(),'platform.XMLHttpRequest');
    // let global = platform.getGlobals()
    let gltfgg = require('../../static/glb_model.glb')
    console.log(gltfgg,'gltfgg---');
    try {
      let gg = gltfLoad.loadAsync(gltf)
      console.log(gg,'gg');
      return gg;
      // let request = new global.XMLHttpRequest();
      // request.open('GET', 'https://test2-1303915342.cos.ap-shanghai.myqcloud.com/taobao/glb_model.glb', true);
      // request.addEventListener('load', function (event) {
      //   console.log(event,'event');
      // })
      // request.addEventListener('error', function (event) {
      //   console.log(event,'errr');
      // })
      // console.log('runrun');
      // axios.get('https://test2-1303915342.cos.ap-shanghai.myqcloud.com/taobao/testZip.zip').then((file)=>{
      //   console.log(file,'file');
      // }).catch((e)=>{
      //   console.log(e,'eeee');
      // })
       fileLoader.loadAsync('https://test2-1303915342.cos.ap-shanghai.myqcloud.com/fan-3d.json',(file)=>{
         console.log(file,'file');
       },(p)=>{
         console.log(p,'p');
       },(e)=>{
         console.log(e,'eeee');
       }).then((a)=>{
         console.log(a,'aaa');
       });
    } catch (error) {
     console.log(error,'error'); 
    }
  
  },
    // 初始化画布
   initCanvas (canvas,canvasRect,json,platform) {
    // 获取json场景文件
    const jsonMap = JSON.parse(json)
    try {
      this.player =  new Player(canvas,jsonMap).run(platform);
      this.platform =  platform
    } catch (e) {
      console.log(e, "initCanvaseeee");
    }

  },
  // 触控开始
  start (e) {
    try {
      console.log("start事件---");
      this.platform.dispatchTouchEvent(e);
    } catch (e) {
      console.log(e, "ee");
    }
  },
  // 触动移动
  move (e) {
    try {
      this.player.triggerEvents.touchMove(e);
      console.log("move移动事件---");
      this.platform.dispatchTouchEvent(e);
    } catch (e) {
      console.log(e, "ee");
    }
  },
  // 触发离开
  end (e) {
    try {
      this.player.triggerEvents.touchEnd(e);
      console.log("end事件---");
      this.platform.dispatchTouchEvent(e);
    } catch (e) {
      console.log(e, "ee");
    }
  },
  // 加载事件
  onUnload () {
    this.disposing = true;
    _optionalChain$i([
      this,
      "access",
      (_5) => _5.currDemo,
      "optionalAccess",
      (_6) => _6.dispose,
      "call",
      (_7) => _7(),
    ]);
    PLATFORM.dispose();

  },
  // 点击事件
  trigger (e) {
    let { set } = e.target.dataset;
    this.player && this.player.dispatchEvent(set);
    // 截图的6张文件地址
    if(set==='screenShot'){
      let imgSrcList = this.player.srcAllAddress
      this.srcFunc(imgSrcList)
    }
    // 重置截图图片
    if(set==='fncReset'){
      // 将图片截图显示在图片上
      this.srcFunc();
      // 清空文字内容
      console.log("清空--");
      this.setData({
        shoesWorld: ''
      })
    }
  },
  // 输入的文字
  inputFun (res) {
    // 设置input的value值
      this.setData({
        shoesWorld: res.detail.value
      })
      this.player.shoeEvents.shoesText = this.data.shoesWorld;
      console.log(this.data.shoesWorld,'this.data.shoesWorld');
  },
  // 图片的信息
  imgLoadFunc (e) {
  // 图片的dom
    shoesSrcDate.src = this.data
    console.log(e, 'e---src');
  },
  // 图片的src插入
  srcFunc(src){
    console.log('插入图片~');
      this.setData({
        imgsrc1:src?src[0]:'',
        imgsrc2:src?src[1]:'',
        imgsrc3:src?src[2]:'',
        imgsrc4:src?src[3]:'',
        imgsrc5:src?src[4]:'',
        imgsrc6:src?src[5]:'',
      })
  },
});

export { shoesSrcDate }
```





```javascript
  this.run = () => {
    WebThree.setPlayer(this);
    PcThree.setPlayer(this);
    this.platform = new TaobaoPlatform(canvas);
    this.global = this.platform.getGlobals();
    let { window, document } = this.global;
    PLATFORM.set(this.platform);
    let { innerHeight, innerWidth } = window;
    const canW = innerWidth; // 确保填满屏幕
    const canH = innerHeight;
    PcThree.setDocument(document);
```





```javascript
2021年7月22日15:15:24
现在---
  import * as THREE from "./libs";
import Player from "../../three/Player";
import axios from 'axios'
const { _optionalChain$i,PLATFORM,GLTFLoader,FileLoader,TaobaoPlatform,$XMLHttpRequest } = THREE;
let shoesSrcDate = {};
let gltfLoad = new GLTFLoader();
let fileLoader  = new FileLoader();
Page({
  data: {
    imgsrc1: '',
    imgsrc2: '',
    imgsrc3: '',
    imgsrc4: '',
    imgsrc5: '',
    imgsrc6: '',
    shoesWorldValue:''
  },
  onCanvasReady () {
    // @ts-ignore
    Promise.all([
      new Promise((resolve) =>
        my
          .createSelectorQuery()
          .select(".canvas")
          .boundingClientRect()
          .exec(resolve)
      ),
      new Promise((resolve, reject) => {
        my.createCanvas({
          id: "gl",
          success: resolve,
          fail: reject,
        });
      }),
    ])
      .then(([res,canvas]) => {
      let platform  = new TaobaoPlatform(canvas);
      PLATFORM.set(platform);
      this.initSenceJson(platform)
        .then(({json,gltf})=>{
          // console.log(gltf,'****----',json,'gltf,json-gltf,json-41');
          this.initCanvas(canvas,res[0],json,platform,gltf);
        });
      })
      .catch((e) =>{console.log(e);});
  },
 async initSenceJson(platform){
    try {

    const json = await fileLoader.loadAsync('https://test2-1303915342.cos.ap-shanghai.myqcloud.com/taobao/scene.json')
    const gltf = await gltfLoad.loadAsync('https://test2-1303915342.cos.ap-shanghai.myqcloud.com/taobao/glb_model.glb');
        // console.log(gltf,'gltf-52');
        // console.log(json,'json-53');
        return {json,gltf}
    }
    catch (e){
        console.log(e);
    }  
  },
  // 初始化画布
  initCanvas (canvas,canvasRect,json,platform,gltf) {
    console.log(json,'json-61',gltf,'gltf-61');
    // 获取json场景文件
    const jsonMap = JSON.parse(json)

    console.log(jsonMap,'jsonMap---66');
    try {
      this.player =  new Player(canvas,jsonMap).run(platform,gltf);
      this.platform =  platform
    } catch (e) {
      console.log(e, "initCanvaseeee");
    }
  },
  // 触控开始
  start (e) {
    try {
      console.log("start事件---");
      this.platform.dispatchTouchEvent(e);
    } catch (e) {
      console.log(e, "ee");
    }
  },
  // 触动移动
  move (e) {
    try {
      this.player.triggerEvents.touchMove(e);
      console.log("move移动事件---");
      this.platform.dispatchTouchEvent(e);
    } catch (e) {
      console.log(e, "ee");
    }
  },
  // 触发离开
  end (e) {
    try {
      this.player.triggerEvents.touchEnd(e);
      console.log("end事件---");
      this.platform.dispatchTouchEvent(e);
    } catch (e) {
      console.log(e, "ee");
    }
  },
  // 加载事件
  onUnload () {
    this.disposing = true;
    _optionalChain$i([
      this,
      "access",
      (_5) => _5.currDemo,
      "optionalAccess",
      (_6) => _6.dispose,
      "call",
      (_7) => _7(),
    ]);
    PLATFORM.dispose();

  },
  // 点击事件
  trigger (e) {
    let { set } = e.target.dataset;
    this.player && this.player.dispatchEvent(set);
    // 截图的6张文件地址
    if(set==='screenShot'){
      let imgSrcList = this.player.srcAllAddress
      this.srcFunc(imgSrcList)
    }
    // 重置截图图片
    if(set==='fncReset'){
      // 将图片截图显示在图片上
      this.srcFunc();
      // 清空文字内容
      console.log("清空--");
      this.setData({
        shoesWorld: ''
      })
    }
  },
  // 输入的文字
  inputFun (res) {
    // 设置input的value值
      this.setData({
        shoesWorld: res.detail.value
      })
      this.player.shoeEvents.shoesText = this.data.shoesWorld;
      console.log(this.data.shoesWorld,'this.data.shoesWorld');
  },
  // 图片的信息
  imgLoadFunc (e) {
  // 图片的dom
    shoesSrcDate.src = this.data
    console.log(e, 'e---src');
  },
  // 图片的src插入
  srcFunc(src){
    console.log('插入图片~');
      this.setData({
        imgsrc1:src?src[0]:'',
        imgsrc2:src?src[1]:'',
        imgsrc3:src?src[2]:'',
        imgsrc4:src?src[3]:'',
        imgsrc5:src?src[4]:'',
        imgsrc6:src?src[5]:'',
      })
  },
});

export { shoesSrcDate }

  
```

```javascript
 at Object.parseImage (127.0.0.1:9127/index.worker.js?
    at ObjectLoader.parse (127.0.0.1:9127/index.worker.js?)
```

```javascript
import * as THREE from "./libs";
import Player from "../../three/Player";
import axios from 'axios'
const { _optionalChain$i,PLATFORM,GLTFLoader,FileLoader,TaobaoPlatform,$XMLHttpRequest } = THREE;
let shoesSrcDate = {};
let gltfLoad = new GLTFLoader();
let fileLoader  = new FileLoader();
Page({
  data: {
    imgsrc1: '',
    imgsrc2: '',
    imgsrc3: '',
    imgsrc4: '',
    imgsrc5: '',
    imgsrc6: '',
    shoesWorldValue:''
  },
  onCanvasReady () {
    // @ts-ignore
    Promise.all([
      new Promise((resolve) =>
        my
          .createSelectorQuery()
          .select(".canvas")
          .boundingClientRect()
          .exec(resolve)
      ),
      new Promise((resolve, reject) => {
        my.createCanvas({
          id: "gl",
          success: resolve,
          fail: reject,
        });
      }),
    ])
      .then(([res,canvas]) => {
      let platform  = new TaobaoPlatform(canvas);
      PLATFORM.set(platform);
      this.initSenceJson(platform)
        .then(({json,gltf})=>{
          // console.log(gltf,'****----',json,'gltf,json-gltf,json-41');
          this.initCanvas(canvas,res[0],json,platform,gltf);
        });
      })
      .catch((e) =>{console.log(e);});
  },
 async initSenceJson(platform){
    try {

    const json = await fileLoader.loadAsync('https://test2-1303915342.cos.ap-shanghai.myqcloud.com/taobao/scene.json')
    const gltf = await gltfLoad.loadAsync('https://test2-1303915342.cos.ap-shanghai.myqcloud.com/taobao/glb_model.glb');
        // console.log(gltf,'gltf-52');
        // console.log(json,'json-53');
        return {json,gltf}
    }
    catch (e){
        console.log(e);
    }  
  },
  // 初始化画布
  initCanvas (canvas,canvasRect,json,platform,gltf) {
    console.log(json,'json-61',gltf,'gltf-61');
    // 获取json场景文件
    const jsonMap = JSON.parse(json)

    console.log(jsonMap,'jsonMap---66');
    try {
      this.player =  new Player(canvas,jsonMap).run(platform,gltf);
      this.platform =  platform
    } catch (e) {
      console.log(e, "initCanvaseeee");
    }
  },
  // 触控开始
  start (e) {
    try {
      console.log("start事件---");
      this.platform.dispatchTouchEvent(e);
    } catch (e) {
      console.log(e, "ee");
    }
  },
  // 触动移动
  move (e) {
    try {
      this.player.triggerEvents.touchMove(e);
      console.log("move移动事件---");
      this.platform.dispatchTouchEvent(e);
    } catch (e) {
      console.log(e, "ee");
    }
  },
  // 触发离开
  end (e) {
    try {
      this.player.triggerEvents.touchEnd(e);
      console.log("end事件---");
      this.platform.dispatchTouchEvent(e);
    } catch (e) {
      console.log(e, "ee");
    }
  },
  // 加载事件
  onUnload () {
    this.disposing = true;
    _optionalChain$i([
      this,
      "access",
      (_5) => _5.currDemo,
      "optionalAccess",
      (_6) => _6.dispose,
      "call",
      (_7) => _7(),
    ]);
    PLATFORM.dispose();

  },
  // 点击事件
  trigger (e) {
    let { set } = e.target.dataset;
    this.player && this.player.dispatchEvent(set);
    // 截图的6张文件地址
    if(set==='screenShot'){
      let imgSrcList = this.player.srcAllAddress
      this.srcFunc(imgSrcList)
    }
    // 重置截图图片
    if(set==='fncReset'){
      // 将图片截图显示在图片上
      this.srcFunc();
      // 清空文字内容
      console.log("清空--");
      this.setData({
        shoesWorld: ''
      })
    }
  },
  // 输入的文字
  inputFun (res) {
    // 设置input的value值
      this.setData({
        shoesWorld: res.detail.value
      })
      this.player.shoeEvents.shoesText = this.data.shoesWorld;
      console.log(this.data.shoesWorld,'this.data.shoesWorld');
  },
  // 图片的信息
  imgLoadFunc (e) {
  // 图片的dom
    shoesSrcDate.src = this.data
    console.log(e, 'e---src');
  },
  // 图片的src插入
  srcFunc(src){
    console.log('插入图片~');
      this.setData({
        imgsrc1:src?src[0]:'',
        imgsrc2:src?src[1]:'',
        imgsrc3:src?src[2]:'',
        imgsrc4:src?src[3]:'',
        imgsrc5:src?src[4]:'',
        imgsrc6:src?src[5]:'',
      })
  },
});

export { shoesSrcDate }


```

